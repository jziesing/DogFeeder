/*!CK:2908199744!*//*1401158326,178179427*/

if (self.CavalryLogger) { CavalryLogger.start_js(["tB4iZ"]); }

__d("GroupMemberSelector",["Event","copyProperties","DOM","Form","SelectorDeprecated","URI"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p,q,r,s){this._form=n;this._search=i.scry(o,'input')[0];this._viewFilter=p;this._groupURI=r;this._orderField=q;this._litestandClassicGroups=s;if(this._litestandClassicGroups){this._viewFilter.subscribe('change',this.onFilter.bind(this));}else k.listen(p,'change',this.onFilter.bind(this));g.listen(n,'submit',this.onSubmit.bind(this));if(this._search)this._search.removeAttribute('disabled');}h(m.prototype,{onFilter:function(){this.onSubmit();},onSubmit:function(){var n;if(this._litestandClassicGroups){n=this._viewFilter.getValue()||'';}else n=k.getValue(this._viewFilter)||'';var o=n.split('-'),p=o[0]||'members';this._orderField.value=o[1]||null;this._form.action=this._groupURI+p+'/';this._form.view.disabled=true;if(this._search&&this._search.value==this._search.placeholder)this._form.query.disabled=true;l(this._form.action).setQueryData(j.serialize(this._form)).go();return false;}});e.exports=m;},null);
__d("legacy:async",["AsyncRequest","AsyncResponse"],function(a,b,c,d){a.AsyncRequest=b('AsyncRequest');a.AsyncResponse=b('AsyncResponse');},3);
__d("ProfileBrowser",["ArbiterMixin","AsyncRequest","CSS","Input","URI","$","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=m(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r,s){"use strict";this.selectionLimit=s.selectionLimit;this.hubBehaviors=s.hubBehaviors;this.hubsData=s.hubsData;this.listView=r.listView;this.selector=r.selector;this.typeahead=r.typeahead;this.hubs=r.hubsTypeahead;this.target=this.listView.getActiveList();this.subscribeListView();this.selector&&this.subscribeSelector();this.typeahead&&this.subscribeTypeahead();this.hubs&&this.subscribeHubs();}q.prototype.subscribeListView=function(){"use strict";this.listView.subscribe('clickedCheckable',function(r,s){this.listView.toggleCheckableItem(s.item,!i.hasClass(s.item,'selectedCheckable'));}.bind(this));};q.prototype.subscribeSelector=function(){"use strict";var r=this.typeahead&&this.typeahead.getCore();this.selector.subscribe('changeTarget',function(s,t){if(r){i.conditionShow(this.typeahead.getElement(),t.showtypeahead);r.getValue()&&r.reset();t.showtypeahead&&r.getElement().focus();}this.target=l(t.target);t.isprimer&&this.listView.setLoadingState(true);this.listView.swapList(this.target);this.hubs&&i.conditionShow(this.hubs.getElement(),t.hubs);}.bind(this));this.selector.subscribe('changeHub',function(s,t){var u=this.hubs.getCore(),v=u.getElement();this.hubs.init(this.hubBehaviors);this.hubs.swapData(this.hubsData[t.value]);u.reset();j.setPlaceholder(v,t.placeholder);v.focus();this.hubendpoint=k(t.endpoint);}.bind(this));};q.prototype.subscribeTypeahead=function(){"use strict";this.typeahead.subscribe('render',function(){var r=this.typeahead.getCore().getValue()?this.typeahead.getView().element:this.target;this.listView.swapList(r);}.bind(this));this.typeahead.subscribe('reset',function(){this.listView.swapList(this.target);}.bind(this));this.typeahead.subscribe('loading',function(r,s){i.conditionClass(this.typeahead.getElement(),'loading',s.loading);}.bind(this));};q.prototype.subscribeHubs=function(){"use strict";this.hubs.subscribe('select',function(r,s){this.hubendpoint.addQueryData({node:s.selected.uid,pagetext:s.selected.text,offset:0,target:this.target.id});i.addClass(this.hubs.getElement(),'hubsLoading');new h(this.hubendpoint).setReadOnly(true).setMethod('POST').setRelativeTo(this.selector.getSelectedAnchor()).setHandler(function(){i.removeClass(this.hubs.getElement(),'hubsLoading');}.bind(this)).send();}.bind(this));};q.prototype.getSelectionLimit=function(){"use strict";return this.selectionLimit;};e.exports=q;},null);
__d("ProfileBrowserListView",["ArbiterMixin","CSS","DOM","Event","Parent","Vector","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=800,o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s,t,u){"use strict";this._root=s;this._activeList=t;this._windowTrigger=u;j.listen(s,'click',this._handleClick.bind(this));}r.prototype.resetScroll=function(){"use strict";this._scroll&&this._scroll.remove();this._listenForScroll();};r.prototype.toggleCheckableItem=function(s,t){"use strict";var u=i.find(s,'input.checkbox');u.checked=t;h.conditionClass(s,'selectedCheckable',t);var v=s.nextSibling||s.previousSibling;v&&h.addClass(v,'sib')&&h.removeClass(v,'sib');};r.prototype.setLoadingState=function(s){"use strict";h.conditionClass(this._root,'showListviewLoading',s);};r.prototype.swapList=function(s){"use strict";h.addClass(this._activeList,'hiddenList');this._activeList=s;h.show(this._activeList);h.removeClass(this._activeList,'hiddenList');};r.prototype.getRoot=function(){"use strict";return this._root;};r.prototype.getActiveList=function(){"use strict";return this._activeList;};r.prototype.setActiveList=function(s){"use strict";this._activeList=s;return this;};r.prototype._handleClick=function(event){"use strict";var s=event.getTarget(),t=k.byClass(s,'checkableListItem');if(!t)return;var u=k.byClass(s,'anchor');if(!u&&k.byTag(s,'a'))return;if(!h.hasClass(t,'disabledCheckable')){u&&event.prevent();this.inform('clickedCheckable',{item:t});event.stop();}};r.prototype._listenForScroll=function(){"use strict";if(this._windowTrigger){this._rootHeight=l.getElementDimensions(this._root).y;if(this._rootHeight)this._scroll=j.listen(window,'scroll',this._handleWindowScroll.bind(this));}else this._scroll=j.listen(this._activeList,'scroll',this._handleListScroll.bind(this));};r.prototype._handleWindowScroll=function(s){"use strict";var t=this._rootHeight-l.getScrollPosition().y;if(t<=n)this.inform('scrollTrigger');};r.prototype._handleListScroll=function(s){"use strict";var t=s.getTarget(),u=t.scrollHeight-t.scrollTop;if(n>u)this.inform('scrollTrigger');};e.exports=r;},null);
__d("ProfileBrowserSelector",["ArbiterMixin","Button","DOM","mixin"],function(a,b,c,d,e,f,g,h,i,j){var k=j(g);for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o,p){"use strict";this._buttonElem=o;this._menu=p;p.forEachItem((function(q){if(q.isSelected&&q.isSelected())this._selectedItem=q;}).bind(this));this._menu.subscribe('change',function(q,r){this.handle(r);}.bind(this));}n.prototype.handle=function(o){"use strict";this._selectedItem=o.item;h.setLabel(this._buttonElem,o.item.getLabel());var p=o.item.getRoot(),q=p.getAttribute('data-selectendpoint'),r=p.getAttribute('data-target');if(r)this.inform('changeTarget',{target:r,value:o.value,isprimer:i.find(p,'a').getAttribute('rel')=='async',showtypeahead:p.getAttribute('data-typeahead'),hubs:!!q});if(q)this.inform('changeHub',{value:o.value,placeholder:p.getAttribute('data-placeholder'),endpoint:q});};n.prototype.getSelectedValue=function(){"use strict";return this._selectedItem.getValue();};n.prototype.getSelectedAnchor=function(){"use strict";return i.find(this._selectedItem.getRoot(),'a');};n.prototype.setSelectedValue=function(o){"use strict";this._menu.setValue(o);};e.exports=n;},null);