/*!CK:1305166916!*//*1401676883,178198863*/

if (self.CavalryLogger) { CavalryLogger.start_js(["gDoov"]); }

__d("Composer",["Arbiter","ArbiterMixin","Button","CSS","DOM","Env","Event","FileForm","Focus","HTML","Input","PageTransitions","Parent","Run","ServerJS","TextAreaControl","URI","URLScraper","$","copyProperties","ge","mixin","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){var da=1,ea=4,fa={},ga,ha=function(ma){if(this.inform('submit')===false){ma.kill();return false;}if(this.submitHandler)return (new Function(this.submitHandler)).apply(this.form);},ia=ba(h);for(var ja in ia)if(ia.hasOwnProperty(ja))la[ja]=ia[ja];var ka=ia===null?null:ia.prototype;la.prototype=Object.create(ka);la.prototype.constructor=la;la.__superConstructor__=ia;function la(ma,na,oa,pa,qa){"use strict";fa[ma.id]=this;this.root=ma;this.resetCfg=na;this.dataSource=pa;this.lazyEndpoint=this.resetCfg&&this.resetCfg.lazyEndpoint;this.focus=k.find(ma,'div.focus_target');this.form=k.find(ma,'form.attachmentForm');this.content=k.find(ma,'div.attachmentContent');this.isMetaComposer=oa;if(this.isMetaComposer){this.messageBox=k.find(ma,'div.uiMetaComposerMessageBox');this.metaArea=k.find(ma,'div.attachmentMetaArea');this.bottomArea=k.find(ma,'div.attachmentBottomArea');this.barArea=k.find(ma,'div.attachmentBarArea');this.auxBarArea=k.find(ma,'.attachmentAuxBarArea');this.blurb=k.find(ma,'div.uiMetaComposerMessageBox div.textBlurb');this.input=k.find(ma,'div.uiMetaComposerMessageBox textarea.input');this.button=k.find(ma,'div.uiMetaComposerMessageBox label.submitBtn');this.privacy=k.find(ma,'div.uiMetaComposerMessageBox li.privacyWidget');this.boosting=k.scry(ma,'div.uiMetaComposerMessageBox li.boostingWidget');}else{this.blurb=k.find(ma,'div.uiComposerMessageBox div.textBlurb');this.input=k.find(ma,'div.uiComposerMessageBox textarea.input');this.button=k.find(ma,'div.uiComposerMessageBox label.submitBtn');this.privacy=k.find(ma,'div.uiComposerMessageBox li.privacyWidget');this.boosting=[];}m.listen(this.form,'submit',ha.bind(this));if(this.isMetaComposer){m.listen(this.input,'focus',this.onFocus.bind(this));if(qa){if(document.activeElement===this.input)setTimeout(this.onFocus.bind(this),0);}else if(s.byClass(this.input,'child_was_focused'))setTimeout(this.onFocus.bind(this),0);}g.inform('xhpc/construct/'+ma.id,this,g.BEHAVIOR_STATE);}la.prototype.init=function(ma){"use strict";this.mentionsInput=ma;if(this.mentionsInput)this.mentionsInput.subscribe('init',function(){var na=this.mentionsInput.getTypeahead().getView();na.subscribe(['reset','render'],function(oa){j.conditionClass(this.root,'uiComposerMention',(oa=='render'));}.bind(this));}.bind(this));this.inform('init',null,g.BEHAVIOR_PERSISTENT);this.setupListen();t.onBeforeUnload(this._handleUnsavedChanges.bind(this));};la.prototype.setupListen=function(){"use strict";m.listen(this.root,'click',this.clickHandler.bind(this));};la.prototype.clickHandler=function(event){"use strict";var ma=event.getTarget();if(s.byClass(ma,'collapsedPostButton'))setTimeout(this.focusInput.bind(this),0);};la.prototype.setBlurb=function(ma){"use strict";k.setContent(this.blurb,ma);};la.prototype.setEnabled=function(ma){"use strict";i.setEnabled(this.button,ma);};la.prototype.getEndpoint=function(){"use strict";return this.form.getAttribute('action');};la.prototype.setEndpoint=function(ma){"use strict";this.form.setAttribute('action',ma);};la.prototype.setLoading=function(ma){"use strict";j.conditionClass(this.root,'async_saving',!!ma);};la.prototype.setContentVisible=function(ma){"use strict";j.conditionClass(this.root,'uiComposerHideContent',!ma);};la.prototype.setMessageBoxVisible=function(ma){"use strict";j.conditionClass(this.root,'uiComposerHideMessageBox',!ma);};la.prototype.setInputVisible=function(ma){"use strict";j.conditionClass(this.root,'uiComposerHideInput',!ma);};la.prototype.setStatusBoxVisible=function(ma){"use strict";j.conditionClass(this.root,'uiComposerHideStatusBox',!ma);};la.prototype.setTopicTaggerVisible=function(ma){"use strict";j.conditionClass(this.root,'uiTagComposerHidden',!ma);};la.prototype.mutate=function(ma){"use strict";if(this.lastComposerInput)q.setValue(this.input,q.getValue(aa(this.lastComposerInput)));var na=aa(ma.xhpc);if(na){var oa=k.scry(this.root,'.uiComposerAttachmentSelected')[0];if(ma.confirmAugmentation&&oa!==na)return;oa&&j.removeClass(oa,'uiComposerAttachmentSelected');j.addClass(na,'uiComposerAttachmentSelected');if(!ma.disableCache)m.listen(na,'click',function(qa){qa.stop();ma.disableCache=true;this.mutate(ma);}.bind(this));}if(!ma.keepContentAreas){this.setContentVisible(false);k.empty(this.content);if(this.isMetaComposer){this.mentionsInput&&this.mentionsInput.setAuxContent(null);k.empty(this.metaArea);k.empty(this.bottomArea);k.empty(this.barArea);k.empty(this.auxBarArea);}}if(ma.content){k.setContent(this.content,p(ma.content));this.setContentVisible(true);}if(this.isMetaComposer){ma.metaContent&&k.setContent(this.metaArea,p(ma.metaContent));ma.bottomContent&&k.setContent(this.bottomArea,p(ma.bottomContent));ma.barContent&&k.setContent(this.barArea,p(ma.barContent));ma.auxBarContent&&k.setContent(this.auxBarArea,p(ma.auxBarContent));}this.setMessageBoxVisible(!ma.messageBoxHidden);j.conditionClass(this.root,'uiComposerWhiteMessageBox',!ma.messageBoxHidden&&!ma.inputHidden&&!ma.content);this.setInputVisible(!ma.inputHidden);this.setStatusBoxVisible(!ma.statusBoxHidden);j.conditionShow(this.privacy,!ma.privacyWidgetHidden);if(this.boosting.length>0)j.conditionShow(this.boosting[0],!ma.boostingWidgetHidden);if(!ma.keepContentAreas){q.setPlaceholder(this.input,ma.placeholder);i.setLabel(this.button,ma.buttonLabel);}this.setBlurb(p(ma.blurb));if(ma.autoscrape){this.scraper&&this.scraper.enable();}else this.scraper&&this.scraper.disable();this.setEnabled(!ma.disabled);this.setTopicTaggerVisible(!ma.hideTopicTagger);this.setEndpoint(ma.endpoint);if(ma.formType==da){this.form.setAttribute('rel','async');}else this.form.removeAttribute('rel');this.form.removeAttribute('target');if(ma.formType==ea){if(!this._fileForm){this._fileForm=new n(this.form);this._fileForm.setAllowCrossOrigin(l.allowCrossOriginComposerUpload);this._fileForm.subscribe('submit',this.setLoading.bind(this,true));this._fileForm.subscribe('failure',this.setLoading.bind(this,false));}}else if(this._fileForm){this._fileForm.destroy();this._fileForm=null;}this.submitHandler=ma.submitHandler;this.lazyEndpoint=ma.lazyEndpoint;j.addClass(this.root,'uiComposerInteracted');j.addClass(this.root,'uiComposerOpen');if(ma.messageBoxFocused){var pa=document.activeElement;if(pa===document.body||s.byClass(pa,'attachmentLink'))setTimeout(this.focusInput.bind(this),0);}if(ma.inputElement){q.setValue(aa(ma.inputElement),q.getValue(this.input));v.getInstance(aa(ma.inputElement)).update();}else v.getInstance(this.input).update();this.lastComposerInput=ma.inputElement;g.inform('composer/mutate',this);};la.prototype.subscribeToMutate=function(ma){"use strict";return g.subscribe('composer/mutate',function(na,oa){if(oa===this)ma();}.bind(this));};la.prototype.unsubscribeFromMutate=function(ma){"use strict";ma.unsubscribe();};la.prototype.reset=function(ma){"use strict";if(this.isMetaComposer){k.empty(this.metaArea);k.empty(this.bottomArea);k.empty(this.barArea);k.empty(this.auxBarArea);}if(this.resetCfg){this.mutate(this.resetCfg);}else{var na=k.scry(this.root,'.uiComposerAttachmentSelected')[0];if(na)j.removeClass(na,'uiComposerAttachmentSelected');}if(!ma){q.reset(this.input);this.mentionsInput&&this.mentionsInput.reset();this.scraper&&this.scraper.reset();}j.removeClass(this.root,'uiComposerInteracted');j.setClass(this.focus,'focus_target');this.setLoading(false);g.inform('composer/reset');};la.prototype.onFocus=function(){"use strict";if(this.lazyEndpoint){var ma=k.find(this.root,'form.attachmentSelectForm'),na=new w(this.lazyEndpoint);na.addQueryData({isAugmentation:true});ma.action=na.toString();var oa=k.scry(this.root,'.uiComposerAttachmentSelected')[0];ma.xhpc.value=oa&&oa.id;ma.xhpc.click();setTimeout(j.removeClass.bind(null,this.root,'async_saving'),0);}this.inform('focus');};la.prototype.focusInput=function(){"use strict";o.set(this.input);};la.prototype.getInput=function(){"use strict";return this.input;};la.prototype.updateDataSourceToken=function(ma){"use strict";if(this.dataSource)this.dataSource.updateToken(ma);};la.prototype._handleUnsavedChanges=function(){"use strict";var ma=r.getNextURI();if(ma.getQueryData().hasOwnProperty('theater'))return;if(this.input.offsetParent!==null&&!q.isEmpty(this.input)&&!(a.Dialog&&a.Dialog.getCurrent()))return "You haven't finished your post yet. Do you want to leave without finishing?";};la.setNodeToConfigure=function(ma){"use strict";ga=ma;};la.configure=function(ma,na,oa){"use strict";var pa=s.byClass(ga,'uiComposer').id,qa=g.subscribe('xhpc/construct/'+pa,function(ra,sa){setTimeout(function(){qa.unsubscribe();},0);sa.mutate(ma);sa.subscribe('init',function(){new u().handle(na);new Function(oa)();if(ma.attachmentJS)new Function(ma.attachmentJS).call(sa);});});};la.publish=function(ma,na){"use strict";na=na||{};na.composer_id=ma;na.composer=la.getInstance(ma);if(na.streamNode){na.streamStory=na.streamNode;}else if(na.streamMarkup)na.streamStory=p(na.streamMarkup).getRootNode();g.inform('composer/publish',na);na.composer&&na.composer.reset(false);};la.finish=function(ma){"use strict";la.getInstance(ma).setLoading(false);};la.getInstance=function(ma){"use strict";var na=s.byClass(y(ma),'uiComposer');return na?fa[na.id]:null;};e.exports=la;},null);
__d("legacy:Composer",["Composer"],function(a,b,c,d){a.Composer=b('Composer');},3);
__d("EventsToggle",["CSS","Event"],function(a,b,c,d,e,f,g,h){function i(j,k,l,m,n){"use strict";this.$EventsToggle0=k;this.$EventsToggle1=l;this.$EventsToggle2=j;this.$EventsToggle3=m;this.$EventsToggle4=n;var o=this.toggle.bind(this);if(this.$EventsToggle4&&this.$EventsToggle4.href)h.listen(this.$EventsToggle4,'click',this.clickTitle);if(this.$EventsToggle3){h.listen(this.$EventsToggle3,'click',o);}else if(this.$EventsToggle0)h.listen(this.$EventsToggle0,'click',o);}i.prototype.toggle=function(){"use strict";if(this.$EventsToggle2)g.toggleClass(this.$EventsToggle2,'hidden_elem');if(this.$EventsToggle0)g.toggle(this.$EventsToggle0);if(this.$EventsToggle1)g.toggle(this.$EventsToggle1);};i.prototype.clickTitle=function(j){"use strict";j.stopPropagation();};e.exports=i;},null);
__d("XEventsSuggestionHideControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/events\/permalink\/related_event\/update\/",{removed_eid:{type:"Int",required:true},seed_eid:{type:"Int"},row_id:{type:"String",required:true},displayed_events:{type:"IntVector"},acontext:{type:"StringToStringMap",required:true},filter_data:{type:"StringToStringMap"},pager_data:{type:"StringToStringMap"}});},null);
__d("EventsSuggestionSync",["AsyncRequest","Event","XEventsSuggestionHideControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i){var j={setPager:function(k){this._pager_data=k;},setListener:function(k,l,m,n){if(!this._ids)this._ids=[];this._ids.push(l);if(!this._data)this._data={};this._data[l]={removed_eid:l,row_id:'suggested_event_item_'+l,filter_data:n,acontext:m};h.listen(k,'click',function(){var o=this.buildURI(l,new i());new g(o).send();this.removeID(l);}.bind(this));},buildURI:function(k,l){if(!this._data)return '#';return l.setInt('removed_eid',this._data[k].removed_eid).setString('row_id',this._data[k].row_id).setIntVector('displayed_events',this._ids).setStringToStringMap('filter_data',this._data[k].filter_data).setStringToStringMap('acontext',this._data[k].acontext).setStringToStringMap('pager_data',this._pager_data).getURI();},removeID:function(k){if(this._ids){var l=this._ids.indexOf(k);if(l>=0)this._ids.splice(l,1);}if(this._data)delete this._data[k];}};e.exports=j;},null);
__d("UpdateRelatedEvents",["DOM","ge","cx","CSS","AsyncRequest","Event","XEventsSuggestionHideControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={init:function(o,p){this._seedID=o;this._actionContext=p;this._ids=[];this._data={};},setListener:function(o,p,q,r){this._ids.push(p);this._data[p]={removed_eid:p,seed_eid:this._seedID,row_id:q,filter_data:r,acontext:this._actionContext};l.listen(o,'click',function(){var s=this.buildURI(p,new m());new k(s).send();this.removeID(p);}.bind(this));},buildURI:function(o,p){if(!this._data)return '#';return p.setInt('removed_eid',this._data[o].removed_eid).setInt('seed_eid',this._data[o].seed_eid).setString('row_id',this._data[o].row_id).setIntVector('displayed_events',this._ids).setStringToStringMap('filter_data',this._data[o].filter_data).setStringToStringMap('acontext',this._data[o].acontext).getURI();},removeID:function(o){if(this._ids){var p=this._ids.indexOf(o);if(p>=0)this._ids.splice(p,1);}if(this._data)delete this._data[o];},clearDashboardSections:function(){var o='pagelet_suggested_events',p=h(o),q=g.find(p,'div.'+"_5epo"),r=null,s=false;for(var t=0;t<q.childNodes.length;t++)if(j.hasClass(q.childNodes[t],"_3g37")){if(r&&!s){g.remove(r);t--;}r=q.childNodes[t];s=false;}else s=true;if(r&&!s)g.remove(r);if(!q.childNodes.length)g.remove(p);}};e.exports=n;},null);
__d("XEventsSuggestionRefreshControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/events\/permalink\/related_event\/refresh\/",{removed_eid:{type:"Int",required:true},seed_eid:{type:"Int"},row_id:{type:"String",required:true},displayed_events:{type:"IntVector"},acontext:{type:"StringToStringMap",required:true},filter_data:{type:"StringToStringMap"},pager_data:{type:"StringToStringMap"}});},null);
__d("EventSuggestionAction",["Event","DOM","csx","cx","CSS","$","AsyncRequest","EventsSuggestionSync","UpdateRelatedEvents","XEventsSuggestionRefreshControllerURIBuilder","EventActionSource","Animation"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s={_items:{},_timers:{},addButton:function(t,u,v,w){if(!this._items[w]){this._items[w]={};this._timers[w]={};}g.listen(t,'click',function(){var x=this._items[w][v];if(!x){x=h.find(t,"^.fbEventsSuggestionItem");this._items[w][v]=x;}if(u==='join'||u==='save'){k.addClass(x,"fbEventsSuggestionFadingItem");var y=null;if(u==='join'){k.addClass(x,"fbEventsSuggestionJoinedItem");y=".fbEventsSuggestionImageJoinedOverlay";}if(u==='save'){k.addClass(x,"fbEventsSuggestionSavedItem");y=".fbEventsSuggestionImageSavedOverlay";}if(y)this.easeInImageOverlay(x,y);}else{k.removeClass(x,"fbEventsSuggestionFadingItem");if(this._timers[w][v]){clearTimeout(this._timers[w][v]);delete this._timers[w][v];}}g.listen(x,'mouseout',function(){if(k.hasClass(x,"fbEventsSuggestionFadingItem"))this._timers[w][v]=setTimeout(function(){this.refreshItem(v,w);}.bind(this),3600);}.bind(this));g.listen(x,'mouseover',function(){if(this._timers[w][v]){clearTimeout(this._timers[w][v]);delete this._timers[w][v];}}.bind(this));}.bind(this));},refreshItem:function(t,u){var v=null;if(u===q.EVENT_DASHBOARD_SUGGESTION||u===q.EVENT_SUGGESTION){v=o;}else if(u===q.EVENT_BOTTOM_SUGGESTION)v=n;if(!v)return;var w=v.buildURI(t,new p());new m(w).send();v.removeID(t);},easeInImageOverlay:function(t,u){var v=h.find(t,".fbEventsSuggestionImageOverlay"),w=h.find(t,u);new r(v).from('opacity',0).to('opacity',1).duration(200).ondone(function(){k.show(v);v.style.opacity=null;new r(w).from('opacity',0).to('opacity',1).duration(200).ondone(function(){k.show(w);w.style.opacity=null;}).ease(r.ease.end).show().go();}).ease(r.ease.end).show().go();},swapItem:function(t,u,v){var w=l(t),x=l(u);k.addClass(w,"fbEventsSuggestionRemovingItem");if(v)h.insertBefore(w,v);new r(w).to('opacity',0).duration(500).ondone(function(){k.hide(w);k.addClass(x,"fbEventsSuggestionShowingItem");k.show(x);h.remove(w);w=null;new r(x).from('opacity',0).to('opacity',1).ondone(function(){x.style.opacity=null;if(v){h.remove(v);v=null;}k.removeClass(x,"fbEventsSuggestionShowingItem");}).duration(300).ease(r.ease.end).show().go();}.bind(this)).ease(r.ease.end).hide().go();}};e.exports=s;},null);
__d("EventInviteFeedback",["Arbiter","Animation"],function(a,b,c,d,e,f,g,h){var i={init:function(){g.subscribe('EventInviteFeedback/timeoutInviteeFeedback',this.timeoutInviteeFeedback.bind(this));},timeoutInviteeFeedback:function(j,k){new h(k).to('backgroundColor','#ffffff').to('borderColor','#ffffff').duration(2000).go();}};e.exports=i;},null);
__d("EventSuggestionsShow",["DOM","CSS","Arbiter"],function(a,b,c,d,e,f,g,h,i){var j={init:function(k){this._list=k.list;this._count=k.count;this._body=k.body;this._initNum=k.init_num;this._expendNum=k.expend_num;this._displayNum=this._initNum;if(this._moreLink)this._moreLink.addEventListener("click",function(){this._displayNum=this._expendNum;var l=0;g.scry(this._list,'li','stat_elem').forEach(function(m){if(l++<this._displayNum)h.removeClass(m,'hidden_elem');}.bind(this));h.addClass(this._moreLink,'hidden_elem');if(this._allLink)h.removeClass(this._allLink,'hidden_elem');}.bind(this));i.subscribe('EventSuggestionsShow/updateEventInvitee',this.updateEventInvitee.bind(this));},addLink:function(k,l){this._moreLink=k;this._allLink=l;},updateEventInvitee:function(k,l){var m=g.scry(this._list,'li','');l.uid.forEach(function(o){for(var p=0;p<m.length;p++)if('suggestion_'+o==m[p].id){m[p].remove();this._count--;break;}}.bind(this));if(this._count===0){h.addClass(this._body,'hidden_elem');return;}var n=0;g.scry(this._list,'li','stat_elem').forEach(function(o){if(n++<this._displayNum)h.removeClass(o,'hidden_elem');}.bind(this));if(this._link&&this._count<=this._initNum)h.addClass(this._link,'hidden_elem');}};e.exports=j;},null);
__d("TypeaheadEventInviteRenderer",["TypeaheadView","CSS"],function(a,b,c,d,e,f,g,h){for(var i in g)if(g.hasOwnProperty(i))k[i]=g[i];var j=g===null?null:g.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=g;function k(){"use strict";if(g!==null)g.apply(this,arguments);}k.prototype.init=function(){"use strict";h.addClass(this.getElement(),'uiTypeaheadView');j.init.call(this);};k.prototype.select=function(l){"use strict";if(!h.hasClass(this.selected,'nonInvitable'))j.select.call(this,l);};e.exports=k;},null);
__d("EventsDesktopTypeaheadInviteFriend",["Arbiter"],function(a,b,c,d,e,f,g){function h(j){"use strict";this.typeahead=j;g.subscribe('EventsDesktopTypeaheadInviteFriend/updateEventInvitee',this.resetTypeaheadCaches.bind(this));}h.prototype.resetTypeaheadCaches=function(j,k){"use strict";if(this.typeahead){var l=this.typeahead.getData(),m=k.uids;for(var n=0;n<m.length;n++){var o=l.getEntry(m[n].toString());if(o){o.status=k.status;l.setEntry(m[n].toString(),o);}}this.typeahead.getCore().subscribe('focus',l.bootstrap.bind(l));}};function i(j){new h(j);}e.exports.init=i;},null);
__d("EventInviteSearchTypeaheadRenderer",["DOM","TypeaheadFacepile"],function(a,b,c,d,e,f,g,h){function i(j,k){var l=[];if(j.xhp)return g.create('li',{className:'raw'},j.xhp);var m=j.photos||j.photo;if(m){if(m instanceof Array){m=h.render(m);}else m=g.create('img',{alt:'',src:m});l.push(m);}if(j.text){var n=[j.text];l.push(g.create('span',{className:'text'},n));}if(j.status){var o=[j.status];l.push(g.create('span',{className:'status'},o));}var p='';if(j.status==null){p=g.create('li',{className:j.type||''},l);}else p=g.create('li',{className:'nonInvitable'},l);if(j.text)p.setAttribute('aria-label',j.text);return p;}i.className='eventInviteTypeahead';e.exports=i;},null);