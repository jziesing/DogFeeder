/*!CK:4199343459!*//*1401473400,178134343*/

if (self.CavalryLogger) { CavalryLogger.start_js(["iXFhW"]); }

__d("ItunesPluginLogging",["Run","Bootloader"],function(a,b,c,d,e,f,g){var h={logPluginData:function(){g.onAfterLoad(function(){var i=b('Bootloader');i.loadModules(["ItunesDetector","AsyncRequest"],function(j,k){new k().setURI('/ajax/ads/media/log').setData({status:j.hasItunes()}).send();});});}};e.exports=h;},null);
__d("AppsDivebarDisplayController",["AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m='173',n={isVisible:function(){if(typeof(this._visible)!='undefined')return this._visible;this._visible=!g.hidden;return this._visible;},showApps:function(){this._visible=true;var o={fb_source_category:'sidebar'};k.loadFromEndpoint('CanvasNavigationPagelet','pagelet_canvas_nav_content',o);j.show('apps_gripper');j.show('pagelet_canvas_nav_content');j.addClass('pagelet_canvas_nav_content',"_4woj");i.inform('AppsDivebar/show-apps');new h('/ajax/feed/apps/resize').setData({height:''+m,menu:true}).setMethod('POST').send();},hideApps:function(){this._visible=false;i.inform('AppsDivebar/hide-apps');j.hide('pagelet_canvas_nav_content');j.hide('apps_gripper');new h('/ajax/feed/apps/resize').setData({height:'1',menu:true}).setMethod('POST').send();}};e.exports=n;},null);
__d("AsyncLoader",["copyProperties","AsyncRequest","BaseAsyncLoader"],function(a,b,c,d,e,f,g,h,i){function j(k,l){this._endpoint=k;this._type=l;}g(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};e.exports=j;},null);
__d("CanvasBookmarkUpdateController",["Arbiter","CSS","ChannelConstants","DOM","csx","AsyncSignal"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(n,o,p){"use strict";this.$CanvasBookmarkUpdateController0=n;this.$CanvasBookmarkUpdateController1=o;this.$CanvasBookmarkUpdateController2=p;g.subscribe(i.getArbiterType('app_request_create'),function(q,r){var s=j.scry(this.$CanvasBookmarkUpdateController1,".item_"+r.obj.appid)[0],t=s&&j.scry(s,"._1k71")[0];t&&j.appendContent(t,r.obj.request);s&&this.$CanvasBookmarkUpdateController3(s,1);}.bind(this));g.subscribe(i.getArbiterType('app_request_delete'),function(q,r){var s=j.scry(this.$CanvasBookmarkUpdateController1,".item_"+r.obj.appid)[0],t=s&&j.scry(s,"[data-requestid='"+r.obj.requestid+"']")[0];t&&j.remove(t.parentNode);s&&this.$CanvasBookmarkUpdateController3(s,-1);}.bind(this));this.$CanvasBookmarkUpdateController0.subscribe('page_start',function(q,r){this.$CanvasBookmarkUpdateController4(this.$CanvasBookmarkUpdateController2,r);}.bind(this));this.$CanvasBookmarkUpdateController4(this.$CanvasBookmarkUpdateController2,0);}m.prototype.$CanvasBookmarkUpdateController3=function(n,o){"use strict";var p=j.find(n,'.countValue'),q=parseInt(j.getText(p),10),r=Math.max(0,q+o);j.setContent(p,r);if(r<1){h.hide(p.parentNode);}else h.show(p.parentNode);};m.prototype.$CanvasBookmarkUpdateController4=function(n,o){"use strict";if(o<n.length&&n[o]){var p='/ajax/canvas/bookmark/slider_logger';new l(p,{data:n[o]}).send();n[o]=null;}};e.exports=m;},null);
__d("RecommendationSliderLogger",["AsyncSignal"],function(a,b,c,d,e,f,g){function h(j,k){if(k<j.length&&j[k]){var l='/ajax/canvas/recommendation/slider_logger';new g(l,{data:j[k]}).send();j[k]=null;}}function i(j,k){this._logData=k;j.subscribe('page_start',function(l,m){if(m<0)m+=this._logData.length;h(this._logData,m);}.bind(this));h(this._logData,0);}e.exports=i;},null);
__d("BuddyListNub",["Arbiter","AvailableList","BlackbirdUpsell","ChannelConnection","ChannelConstants","ChatConfig","ChatSidebar","ChatVisibility","CSS","Dock","DOM","Event","HTML","JSXDOM","KeyEventController","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","Promise","Toggler","csx","cx","setTimeoutAcrossTransitions","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){var ga=32,ha=10;for(var ia in w)if(w.hasOwnProperty(ia))ka[ia]=w[ia];var ja=w===null?null:w.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=w;function ka(la,ma,na){"use strict";w.call(this);ja.init.call(this,la);this.root=la;this.onTypeaheadLoaded=null;this.typeaheadPromise=new aa(function(pa,qa){this.onTypeaheadLoaded=pa;}.bind(this));this.onOrderedListLoaded=null;this.orderedListPromise=new aa(function(pa,qa){this.onOrderedListLoaded=pa;}.bind(this));this.button=q.find(la,'a.fbNubButton');this.unreadCount=q.find(la,"span._5ayx");this.label=q.find(la,'span.label');this.body=q.scry(la,'div.fbNubFlyoutBody')[0];this.container=y.byClass(la,"_56ox");var oa=q.find(la,'div.fbNubFlyoutTitlebar');ba.createInstance(oa).setSticky(false);if(ma)this.initOrderedList(ma);h.subscribe('buddylist/availability-changed',this._updateCount.bind(this));g.subscribe('chat/connect',this._handleConnect.bind(this));z.subscribe('privacy-user-presence-changed',this._handleVisibilityChange.bind(this));this.message=q.find(la,"div._4mq1");this.warningMsgText=null;this.warningMsgEventListener=null;this.showWarningTimeout=null;j.subscribe(j.CONNECTED,this._handleChannelConnected.bind(this));j.subscribe(j.SHUTDOWN,this._handleChannelShutdown.bind(this));j.subscribe(j.RECONNECTING,this._handleChannelReconnecting.bind(this));j.subscribe([j.MUTE_WARNING,j.UNMUTE_WARNING],this._updateView.bind(this));this.subscribe('show',this.onShow.bind(this));this.subscribe('hide',this.onHide.bind(this));this.subscribe('resize',this.onResize.bind(this));r.listen(la,'keydown',this._onKeyDown.bind(this));r.listen(this.button,'click',this.onButtonClick.bind(this));u.registerKey('q',function(event){if(this._isOpen){this.typeaheadPromise.then(function(pa){pa.getCore().getElement().focus();});}else{this.onButtonClick();this.show();}event.prevent();}.bind(this));if(na)this.initTypeahead(na);g.subscribe('sidebar/show',this.hide.bind(this));g.subscribe('sidebar/hide',this._onSidebarHide.bind(this));this._orderedListCount=x.getList().length;g.inform('buddylist-nub/initialized',this,g.BEHAVIOR_PERSISTENT);this._handleVisibilityChange();}ka.prototype.initOrderedList=function(la){"use strict";if(!la)return;la.subscribe('render',this.flyoutContentChanged.bind(this));la.setScrollContainer(this.body);this.onOrderedListLoaded(la);};ka.prototype.initTypeahead=function(la){"use strict";if(!la)return;la.getCore().subscribe('escape',this.hide.bind(this));la.subscribe(['respond','reset'],function(ma,na){if(this._isOpen)this.orderedListPromise.then(function(oa){var pa=oa.isVisible();if(na&&na.value&&na.value===la.getCore().getValue()&&la.getView().isVisible()){p.setUseMaxHeight(this.root,false);oa.hide();}else this._showBuddyList();if(pa!==oa.isVisible())this.flyoutContentChanged();}.bind(this));}.bind(this));this.onTypeaheadLoaded(la);};ka.prototype.getButton=function(){"use strict";return this.button;};ka.prototype.getRoot=function(){"use strict";return this.root;};ka.prototype._handleConnect=function(la){"use strict";this._updateView(true);};ka.prototype._getShutdownReason=function(la){"use strict";switch(la){case k.HINT_AUTH:return "Your session has timed out. Please log in.";case k.HINT_CONN:return fa._("Facebook {Chat} is currently unavailable.",{Chat:"Chat"});case k.HINT_MAINT:return fa._("Facebook {Chat} is currently down for maintenance.",{Chat:"Chat"});default:return fa._("Facebook {Chat} is currently unavailable.",{Chat:"Chat"});}};ka.prototype._getReconnectMsg=function(la){"use strict";var ma;if(la===null){ma="Unable to connect to chat. Check your Internet connection.";}else if(la>l.get('warning_countdown_threshold_msec')){var na=q.create('a',{href:'#',className:'fbChatReconnectLink'},"Try again"),oa=q.create('div',null,na),pa=oa.innerHTML;ma=s(fa._("Unable to connect to chat. {try-again-link}",{'try-again-link':pa}));}else if(la>1000){ma=fa._("Unable to connect to chat. Reconnecting in {seconds}...",{seconds:Math.floor(la/1000)});}else ma="Unable to connect to chat. Reconnecting...";return ma;};ka.prototype._resetShowWarningTimeout=function(){"use strict";if(this.showWarningTimeout){clearTimeout(this.showWarningTimeout);this.showWarningTimeout=null;}};ka.prototype._handleChannelConnected=function(la){"use strict";this._resetShowWarningTimeout();this.orderedListPromise.then(function(ma){if(ma.isVisible())n.goOnline();});this.warningMsgText=null;this._updateView();};ka.prototype._handleChannelShutdown=function(la,ma){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getShutdownReason(ma);this._updateView();};ka.prototype._handleChannelReconnecting=function(la,ma){"use strict";this._resetShowWarningTimeout();this.warningMsgText=this._getReconnectMsg(ma);if(ma>1000){if(ma>l.get('warning_countdown_threshold_msec')){if(this.warningMsgEventListener){this.warningMsgEventListener.remove();this.warningMsgEventListener=null;}this.warningMsgEventListener=r.listen(this.message,'click',function(event){if(o.hasClass(event.getTarget(),'fbChatReconnectLink')){this._tryReconnect();event.kill();}}.bind(this));}this.showWarningTimeout=ea(this._handleChannelReconnecting.bind(this,la,ma-1000),1000);}this._updateView();};ka.prototype._tryReconnect=function(){"use strict";if(j.disconnected())j.reconnect();};ka.prototype._handleVisibilityChange=function(){"use strict";this._updateView();if(i.shouldShow()){if(n.hasBlackbirdEnabled()){i.showBlackbirdDialog(this.getButton(),z.getVisibility());}else if(!n.isOnline())i.showOfflineDialog(this.getButton());}else i.hide();if(!n.isOnline())this.hide();};ka.prototype._updateView=function(la){"use strict";var ma=this.container;if(ma){o.conditionClass(ma,'offline',!n.isOnline());o.conditionClass(ma,'error',j.disconnected());}if(j.disconnected())q.setContent(this.message,this.warningMsgText);var na,oa;if(!n.isOnline()){na=fa._("{Chat} (Off)",{Chat:"Chat"});}else if(j.disconnected()){na=fa._("{Chat} (Disconnected)",{Chat:"Chat"});}else{var pa=h.getOnlineCount();if(pa){na=fa._("{Chat} {number-available}",{Chat:"Chat",'number-available':t.span({className:"count"},"(",pa,")")});}else{na="Chat";oa=true;}}this._setUnread(this._unreadMessageCount);this._setLabel(na,oa);this.buttonContentChanged();};ka.prototype.onButtonClick=function(){"use strict";this._conditionallyShowTypeahead();this.typeaheadPromise.then(function(la){if(o.shown(la.getElement())){var ma=function(){la.getCore().getElement().focus();i.dismiss();};if(this._isOpen){ma();}else{var na=this.subscribe('show',ma.bind(this));setTimeout(this.unsubscribe.bind(this,na),0);}}}.bind(this));};ka.prototype.onHide=function(){"use strict";this._isOpen=false;this.orderedListPromise.then(function(la){if(this._buddyListRenderSubscription){la.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null;}la.hide();}.bind(this));this.typeaheadPromise.then(function(la){la.getCore().reset();});};ka.prototype._onKeyDown=function(event){"use strict";var la=r.getKeyCode(event);if(la===v.ESC&&!o.hasClass(this.root,'menuOpened')){this.hide();return false;}else if(la==v.RETURN)m.enable();};ka.prototype._onSidebarHide=function(event){"use strict";this.getButton().focus();};ka.prototype.onResize=function(){"use strict";var la=p.getMaxFlyoutHeight(this.root)-60,ma=Math.max(250,la);this.orderedListPromise.then(function(na){na.setNumTopFriends(Math.floor(ma/ga));});};ka.prototype._showBuddyList=function(){"use strict";this.orderedListPromise.then(function(la){if(!this._buddyListRenderSubscription)this._buddyListRenderSubscription=la.subscribe('render',p.setUseMaxHeight.bind(p,this.root,false));la.show();}.bind(this));};ka.prototype.onShow=function(){"use strict";this._isOpen=true;if(j.disconnected()){this._tryReconnect();this._showBuddyList();}else n.goOnline(this._showBuddyList.bind(this));};ka.prototype._setLabel=function(la,ma){"use strict";var na=this.label.cloneNode(true);q.setContent(na,la);q.replace(this.label,na);this.label=na;this.throbber&&o.conditionShow(this.throbber,!!ma);};ka.prototype._setUnread=function(la){"use strict";o.conditionShow(this.unreadCount,!!la);if(la){la=t.span({className:"_51jx _5ayw"},la);q.setContent(this.unreadCount,la);}};ka.prototype._conditionallyShowTypeahead=function(){"use strict";this.typeaheadPromise.then(function(la){o.conditionShow(la.getElement(),this._orderedListCount>=ha);}.bind(this));};ka.prototype._updateCount=function(){"use strict";this._updateView();this._conditionallyShowTypeahead();};e.exports=ka;},null);
__d("BuddyListNubInitializer",["BuddyListNub"],function(a,b,c,d,e,f,g){var h,i={init:function(j){if(!h)h=new g(j,null,null);},initOrderedList:function(j,k){i.init(j);h.initOrderedList(k);},initTypeahead:function(j,k){i.init(j);h.initTypeahead(k);}};e.exports=i;},null);
__d("ChatHovercard",["Arbiter","AsyncLoader","Hovercard","JSLogger","debounce"],function(a,b,c,d,e,f,g,h,i,j,k){var l=5,m=new h('/ajax/chat/hovercard/sidebar.php','hover'),n=j.create('chat_hovercard');g.subscribe('Hovercard/dirty',m.reset.bind(m));function o(s,t){m.get(s,function(u){setTimeout(function(){if(!u){n.error('fetch_failure',{id:s});return;}var v=i.getDialog(u);if(!v){n.error('no_hovercard',{id:s,endpoint:u});return;}if(s==t.getActiveID())t.showHovercard(s,v);},0);});}function p(s,t){var u=[];function v(y){if(y>=0&&y<s.length)u.push(s[y]);}var w=s.indexOf(t);if(w>-1){v(w);for(var x=1;x<l;x++){v(w+x);v(w-x);}}return u.filter(function(y){return y;});}function q(s,t){var u=t.getActiveID();if(u){var v=s.getShowingUsers(),w=p(v,u);m.get(w,function(){});}}function r(s){var t=s.getHoverController();t.registerDefault(o);t.subscribe('hover',k(q.bind(null,s,t),100));}e.exports=r;},null);
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","copyProperties","cx","mixin","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(x){h.addClass(x,'fetching');}function s(x){h.removeClass(x,'fetching');}var t=o(g);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x){"use strict";this._orderedList=x;this._root=x.getRoot();j.listen(this._root,'mouseover',this._mouseOver.bind(this));j.listen(this._root,'mouseleave',this._mouseLeave.bind(this));x.subscribe('click',q(this._hide,this));}w.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var x=event.getTarget(),y=l.byClass(x,"_42fz")||l.byClass(x,"_5a58");y&&this._setActiveItem(y);};w.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null);};w.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};w.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};w.prototype._show=function(){"use strict";var x=this.getActiveID(),y=false;if(this._defaultHandler){y=true;i.applyWithGuard(this._defaultHandler,{},[x,this]);}if(y&&this._showingID!=this.getActiveID())r(this._activeItem);};w.prototype._setActiveItem=function(x){"use strict";if(x!=this._activeItem){this._clearTimeouts();this._activeItem&&s(this._activeItem);this._activeItem=null;var y=x?0:100;this._hideTimeout=p(function(){if(this.getActiveID()!=this._showingID)this._hide();}.bind(this),y);if(x){this._activeItem=x;var z=y+500;this._showTimeout=p(function(){this._show();}.bind(this),z);this.inform('hover');}else this.inform('leave');}};w.prototype.registerDefault=function(x){"use strict";this._defaultHandler=x;};w.prototype.getActiveID=function(){"use strict";var x=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return x||null;};w.prototype.showHovercard=function(x,y){"use strict";if(x==this.getActiveID()&&x!=this._showingID){this._clearTimeouts();s(this._activeItem);this._hide();this._showingDialog=y;this._showingID=x;var z=y.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),aa=y.subscribe('mouseleave',function(){z.unsubscribe();this._setActiveItem(null);}.bind(this)),ba=y.subscribe('hide',function(){this.inform('hovercard_hide');z.unsubscribe();aa.unsubscribe();ba.unsubscribe();}.bind(this));y.enableBehavior(k).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};m(w.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});e.exports=w;},null);
__d("ChatSidebarItem.react",["AvailableListConstants","ChatConfig","ChatSidebarConstants","Image.react","Link.react","React","SplitImage.react","cx","ix"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=9,q=l.createClass({displayName:'ChatSidebarItem',propTypes:{birthday:l.PropTypes.bool,context:l.PropTypes.string,detailedStatus:l.PropTypes.string,href:l.PropTypes.object,imageSize:l.PropTypes.number,name:l.PropTypes.string,onClick:l.PropTypes.func,status:l.PropTypes.number,statusTime:l.PropTypes.string,unreadCount:l.PropTypes.number},render:function(){var r=(("_55ln")+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount?' '+"_5bom":''));return (k({className:r,href:this.props.href,onClick:this.props.onClick,rel:"ignore"},l.DOM.div({className:"_55lp"},l.DOM.div({className:"_56p9"},this.renderImage(),l.DOM.div({className:"_568w"})),l.DOM.div({className:"_5bon"},this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),l.DOM.div({className:"_55lr"},this.props.name),l.DOM.div({className:"_55ls"},this.props.context))));},renderImage:function(){var r=this.props.imageSize||i.IMAGE_SIZE;return m({size:r,srcs:this.props.images});},renderUnreadCount:function(){var r=this.props.unreadCount;if(!r)return null;var s=(("_5boo")+(r>p?' '+"_5bop":''));if(r>p)r=p+'+';return (l.DOM.div({className:s},r));},renderStatus:function(){var r=this.getStatusSrc();if(!r&&!this.props.statusTime)return null;var s=r?j({className:"_568_",src:r}):null;return (l.DOM.div({className:"_568z"},l.DOM.div({className:"_568-"},this.props.statusTime),this.renderDetailedPresence(),s));},renderDetailedPresence:function(){if(this.props.unreadCount)return null;return (l.DOM.div({className:"_5t35"},this.props.detailedStatus));},renderBirthday:function(){if(!this.props.birthday)return null;var r=o('/images/gifts/icons/cake_icon.png');if(h.get('gray_cake'))r=o('/images/chat/sidebar/livebar/divebar_cake.png');return (j({className:"_5dv3",src:r}));},getStatusSrc:function(){switch(this.props.status){case g.ACTIVE:case g.IDLE:return o('/images/litestand_classic/sidebar/online.png');case g.MOBILE:if(h.get('sidebar_remove_mobile_icon'))return null;return o('/images/litestand_classic/sidebar/pushable.png');}return null;}});e.exports=q;},null);
__d("ChatSidebarUser.react",["ChatOpenTab","ChatSidebarItem.react","WebMessengerPermalinkConstants","React"],function(a,b,c,d,e,f,g,h,i,j){var k=j.createClass({displayName:'ChatSidebarUser',propTypes:{birthday:j.PropTypes.bool,detailedStatus:j.PropTypes.string,image:j.PropTypes.string,imageSize:j.PropTypes.number,name:j.PropTypes.string,sectionName:j.PropTypes.string.isRequired,slot:j.PropTypes.number,status:j.PropTypes.number,statusTime:j.PropTypes.string,unreadCount:j.PropTypes.number,userID:j.PropTypes.string.isRequired},_openTab:function(event){g.openUserTab(this.props.userID,this.props.sectionName,{global_slot:this.props.slot});return event.preventDefault();},render:function(){var l=i.getURIPathForIDOrVanity(this.props.userID);return (h({onClick:this._openTab,href:{url:l},imageSize:this.props.imageSize,images:this.props.image,name:this.props.name,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,detailedStatus:this.props.detailedStatus,context:this.props.context,unreadCount:this.props.unreadCount}));}});e.exports=k;},null);
__d("ChatUnreadCount",["ArbiterMixin","copyProperties","MercuryThreadInformer","MercuryThreads"],function(a,b,c,d,e,f,g,h){var i=b('MercuryThreadInformer').get(),j=b('MercuryThreads').get(),k={};i.subscribe('threads-updated',function(l,m){for(var n in m){var o=j.getCanonicalUserInThread(n);k.inform('unread-changed',o);}});h(k,g,{getUnreadCountForUID:function(l,m){j.getThreadMeta(j.getThreadIdForUser(l),function(n){m(n.unread_count);});}});e.exports=k;},null);
__d("ChatSidebarUserGroup.react",["AvailableList","AvailableListConstants","ChannelConnection","ChatContexts","ChatSidebarSections","ChatSidebarUser.react","ChatUnreadCount","LastMobileActiveTimes","PresencePrivacy","PresenceStatus","React","ShortProfiles","SubscriptionsHandler","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v=Object.keys(k).map(function(x){return k[x];}),w=q.createClass({displayName:'ChatSidebarUserGroup',propTypes:{ids:q.PropTypes.array.isRequired,sectionName:q.PropTypes.oneOf(v).isRequired},getInitialState:function(){return {userData:[],unreadCounts:{}};},_updateUnreadCount:function(x){m.getUnreadCountForUID(x,function(y){this.state.unreadCounts[x]=y;this.setState({unreadCounts:this.state.unreadCounts});}.bind(this));},componentWillMount:function(){this.componentWillReceiveProps(this.props);this._subscriptions=new s();this._subscriptions.addSubscriptions(g.subscribe(h.ON_AVAILABILITY_CHANGED,u(this.forceUpdate,this)),o.subscribe('privacy-changed',u(this.forceUpdate,this)),i.subscribe([i.CONNECTED,i.RECONNECTING,i.SHUTDOWN,i.MUTE_WARNING,i.UNMUTE_WARNING],u(this.forceUpdate,this)));},componentWillUnmount:function(){this._subscriptions.release();},componentWillReceiveProps:function(x){r.getMulti(x.ids,function(y){var z=x.ids.map(function(aa){return y[aa];});this.setState({userData:z});}.bind(this));},_renderProfile:function(x,y){if(x.id===0)return null;var z=p.get(x.id),aa=(z!==h.ACTIVE)?n.getShortDisplay(x.id):null,ba=(z===h.ACTIVE)?p.getDetailedActivePresence(x.id):null,ca=i.disconnected()||!o.allows(x.id),da=j.getShortDisplay(x.id);return (q.DOM.li({className:(("_42fz")+(da?' '+"_52zj":'')+(ca?' '+"_570-":'')),'data-id':x.id,key:x.id},l({birthday:p.isBirthday(x.id),context:da,detailedStatus:ba,image:x.thumbSrc,imageSize:this.props.imageSize,name:x.name,sectionName:this.props.sectionName,slot:y,status:z,statusTime:aa,unreadCount:this.state.unreadCounts[x.id],userID:x.id})));},render:function(){return this.transferPropsTo(q.DOM.ul(null,this.state.userData.map(this._renderProfile)));}});e.exports=w;},null);
__d("ChatSidebarOrderedList.react",["Animation","AsyncDialog","AsyncRequest","ChatQuietLinks","ChatSidebarConstants","ChatSidebarSections","ChatSidebarUserGroup.react","PresencePrivacy","React","URI","cx","shield","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t=o.createClass({displayName:'ChatSidebarOrderedList',propTypes:{topUsers:o.PropTypes.array.isRequired,availableUsers:o.PropTypes.array.isRequired,isSidebar:o.PropTypes.bool.isRequired,scrollContainer:o.PropTypes.object},getInitialState:function(){return {mouseOver:true,pauseRendering:false};},shouldComponentUpdate:function(u,v){return !v.mouseOver&&!v.pauseRendering;},componentDidMount:function(){j.nukeLinks(this.getDOMNode());},_scrollToSeparator:function(){if(!this.props.scrollContainer)return;var u=this.refs.usersSeparator.getDOMNode(),v=this.props.scrollContainer.scrollHeight,w=this.props.scrollContainer.clientHeight,x=this.props.scrollContainer.scrollTop,y=Math.min(u.offsetTop,v-w);if(x!==y){var z=Math.abs(y-x)/this.props.scrollContainer.clientHeight*500;new g(this.props.scrollContainer).to('scrollTop',y).ease(g.ease.end).duration(z).go();}},_openBlackbirdSettings:function(){var u=new p('/ajax/chat/privacy/settings_dialog.php').addQueryData({ref:'whitelist_separator'});h.send(new i(u));},_renderOfflineSection:function(){var u=k.getImageSize(this.props.isSidebar),v=this.props.topUsers.filter(function(x){return !n.allows(x);});v.splice(-2);var w=(o.DOM.a({href:"#",onClick:this._openBlackbirdSettings},"Edit"));return [o.DOM.div({key:"users_separator1",className:"_554m"},o.DOM.div({className:"_554o"},o.DOM.div({className:"_554n"},o.DOM.span({className:"_554p"},"MORE FRIENDS"),o.DOM.div({className:"_554q"},o.DOM.span({className:"_554r"}))))),o.DOM.div({key:"users_separator2",className:"_554m blackbirdWhitelist"},o.DOM.div({className:"_554o"},o.DOM.div({className:"_554n"},o.DOM.div({className:"_5v-d"},o.DOM.span({className:"_554t"},s._("These friends can't see you on chat. {=link}",{'=link':w})))))),m({key:l.OFFLINE_USERS,sectionName:l.OFFLINE_USERS,ids:v,imageSize:u})];},_renderOnlineSection:function(){if(this.props.availableUsers.length===0)return null;var u=k.getImageSize(this.props.isSidebar);return [o.DOM.div({key:"users_separator",ref:"usersSeparator",onClick:this._scrollToSeparator,className:"_554m moreOnlineFriends"},o.DOM.div({className:"_554o"},o.DOM.div({className:"_554n"},o.DOM.span({className:"_554p"},s._("{MORE ONLINE FRIENDS} ({=count})",{'MORE ONLINE FRIENDS':"MORE FRIENDS",'=count':this.props.availableUsers.length})),o.DOM.div({className:"_554q"},o.DOM.span({className:"_554r"}))))),m({key:l.MORE_ONLINE_FRIENDS,sectionName:l.MORE_ONLINE_FRIENDS,ids:this.props.availableUsers,imageSize:u})];},render:function(){var u=k.getImageSize(this.props.isSidebar),v=this.props.topUsers;if(n.getVisibility()==n.ONLINE)v=this.props.topUsers.filter(function(x){return n.allows(x);});var w=(n.getOnlinePolicy()==n.ONLINE_TO_WHITELIST&&n.getVisibility())?this._renderOfflineSection():this._renderOnlineSection();return this.transferPropsTo(o.DOM.li({onMouseEnter:r(this.setState,this,{mouseOver:true}),onMouseLeave:r(this.setState,this,{mouseOver:false})},m({key:l.ORDERED_LIST,sectionName:l.ORDERED_LIST,ids:v,imageSize:u}),w));}});e.exports=t;},null);
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;},null);
__d("ChatOrderedList",["Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","CSS","ChatConfig","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarOrderedList.react","ChatSortUsers","ChatVisibility","DOM","DataStore","Event","JSLogger","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","React","createObjectFrom","csx","debounceAcrossTransitions","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){var fa=null,ga,ha=da(h);for(var ia in ha)if(ha.hasOwnProperty(ia))ka[ia]=ha[ia];var ja=ha===null?null:ha.prototype;ka.prototype=Object.create(ja);ka.prototype.constructor=ka;ka.__superConstructor__=ha;function ka(la,ma,na){"use strict";this._isSidebar=la;this._root=ma;this._itemsMap={};this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._hasRendered=false;this._preventRendering=false;this._hoverController=null;this._contextualDialog=na;this._orderedList=r.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=w.byClass(this._root,'scrollableOrderedList');this._chatSidebar=w.byClass(this._root,'fbChatSidebar');this._scrollableArea=w.byClass(this._root,'scrollable');if(this._isSidebar)d(['ChatHovercard'],function(oa){new oa(this);}.bind(this));g.subscribe(u.DUMP_EVENT,function(oa,pa){pa.chat_lists=pa.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:v.getList(),available_list:ka.getAvailableList(this._excludedIds),excluded_list:this._excludedIds};}.bind(this));x.subscribe('privacy-user-presence-changed',ea(this._render,this));i.subscribe(j.ON_AVAILABILITY_CHANGED,ea(this._render,this));}ka.prototype.getShowingUsers=function(){"use strict";return r.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};ka.prototype.getUserForNode=function(la){"use strict";return s.get(la,'id')||s.get(la,'serverthreadid');};ka.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new m(this,this._contextualDialog);return this._hoverController;};ka.prototype.getItemHeight=function(){"use strict";return n.getItemHeight(this._isSidebar);};ka.prototype.getRoot=function(){"use strict";return this._root;};ka.prototype.getSortedList=function(la){"use strict";return ka.getSortedList(la||this._excludedIds,this._numTopFriends);};ka.prototype.getCachedSortedList=function(la){"use strict";if(fa==null)fa=this.getSortedList(la);return fa;};ka.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;k.hide(this._scrollableOrderedList||this._root);this.inform('hide');};ka.prototype.setExcludedIds=function(la){"use strict";this._excludedIds=aa(la||[]);};ka.prototype.setNumTopFriends=function(la){"use strict";if(la!==this._numTopFriends){this._numTopFriends=la;this._render();}};ka.prototype._renderOrderedList=function(){"use strict";if(!this._isVisible||ga)return;var la=ka.getSortedList({},this._numTopFriends),ma=ka.getAvailableList(aa(la));ma.sort(p.sortMobile);z.renderComponent(o({availableUsers:ma,isSidebar:this._isSidebar,scrollContainer:this._scrollContainer,topUsers:la}),this._orderedList);this.inform('render');};ka.prototype._render=function(){"use strict";this._render=ca(this._renderOrderedList.bind(this),300);this._render();};ka.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;k.show(this._scrollableOrderedList||this._root);this._render();this.inform('show');};ka.prototype.isVisible=function(){"use strict";return this._isVisible;};ka.prototype.setScrollContainer=function(la){"use strict";if(r.contains(la,this._root))this._scrollContainer=la;};ka.getSortedList=function(la,ma){"use strict";var na=v.getList().filter(function(qa){return !(qa in la)&&x.getFriendVisibility(qa)!==x.BLACKLISTED;}),oa=[];if(!q.isOnline()){Array.prototype.push.apply(oa,na);}else{if(x.getOnlinePolicy()===x.ONLINE_TO_WHITELIST)na=this._filterByWhitelist(na);if(l.get('chat_web_ranking_with_presence')){Array.prototype.push.apply(oa,na);}else oa=this._splitOutTopFriends(na,ma);}oa=oa.slice(0,ma);if(oa.length===ma){var pa=ka.getAvailableList(oa.concat(la)).length;pa&&oa.splice(-1);}if(!l.get('chat_web_ranking_with_presence'))oa.sort(p.sort);fa=oa.slice();return oa;};ka._filterByWhitelist=function(la){"use strict";var ma=la,na={},oa,pa;la=[];for(oa=0;oa<ma.length;++oa){pa=ma[oa];if(x.allows(pa)){na[pa]=true;la.push(pa);}}var qa=x.getWhitelist();for(oa=0;oa<qa.length;++oa){pa=qa[oa];if(!(pa in na))la.push(pa);}for(oa=0;oa<ma.length;++oa){pa=ma[oa];if(!x.allows(pa))la.push(pa);}return la;};ka._splitOutTopFriends=function(la,ma){"use strict";var na=[],oa=[],pa=l.get('ordered_list.top_friends',0),qa=l.get('ordered_list.top_mobile',0),ra=ma,sa=la.length;for(var ta=0;ta<sa&&ra>0;ta++){var ua=la[ta],va=y.get(ua),wa=va===j.ACTIVE;if(wa||(va===j.MOBILE&&ta<qa)||ta<pa){na.push(ua);wa&&ra--;}else oa.push(ua);}if(ta<sa)Array.prototype.push.apply(oa,la.slice(ta));if(na.length<ma)Array.prototype.push.apply(na,oa);return na;};ka.getAvailableList=function(la){"use strict";var ma;if(l.get('divebar_show_mobile_more_friends')||l.get('divebar_show_mobile_more_friends_alphabetical'))ma=i.getAvailableIDs();if(!ma)ma=i.getOnlineIDs();return ma.filter(function(na){return !(na in la);});};ka._pause=function(){"use strict";ga=true;};ka._unpause=function(){"use strict";ga=false;};ka._registerToggleRenderItem=function(la){"use strict";t.listen(la,'click',function(){ga=!ga;k.conditionClass(la,'checked',ga);});};e.exports=ka;},null);
__d("ChatSidebarDropdown",["AppsDivebarDisplayController","Arbiter","AsyncRequest","Chat","ChatOptions","ChatOrderedList","ChatSidebar","ChatVisibility","CSS","DOMQuery","JSLogger","PresenceState","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(u,v,w,x,y,z){"use strict";this._menu=v;this._popover=u.getPopover();this._selectedValues={};this._menuIsRendered=false;this._editingFavoriteList=false;this._hasAppsOption=z;this._logger=q.create('blackbird');this._menu.subscribe('itemclick',this._onClick.bind(this));this._popover.subscribe('init',this._onLayerInit.bind(this));h.subscribe('chat/option-changed',this._onOptionChanged.bind(this));}t.prototype._onLayerInit=function(){"use strict";this._menuIsRendered=true;o.addClass(this._popover.getLayer().getContentRoot(),"_5vm9");this._displayBrowserNotificationsIfNeeded();this._updateVisibility();h.subscribe('chat-visibility/go-online',this._updateVisibility.bind(this));h.subscribe('chat-visibility/go-offline',this._updateVisibility.bind(this));this._updateSelectedItems();if(this._editingFavoriteList)this._updateEditFavoriteListLabel(this._editingFavoriteList);if(this._hasAppsOption)this._registerAppHandlers();};t.prototype._updateSelectedItems=function(){"use strict";this._menu.forEachItem(function(u){var v=u.getValue&&u.getValue();if(v in this._selectedValues){var w=this._selectedValues[v];if(w){u.select();}else u.deselect();}}.bind(this));};t.prototype._registerAppHandlers=function(){"use strict";this._updateAppsVisibility();h.subscribe('AppsDivebar/hide-apps',this._updateAppsVisibility.bind(this));h.subscribe('AppsDivebar/show-apps',this._updateAppsVisibility.bind(this));};t.prototype._updateAppsVisibility=function(){"use strict";o.conditionClass(this._popover.getLayer().getContentRoot(),"_2vh",!g.isVisible());};t.prototype._updateVisibility=function(){"use strict";o.conditionClass(this._popover.getLayer().getContentRoot(),"_5vma",!n.isOnline());};t.prototype._displayBrowserNotificationsIfNeeded=function(){"use strict";if(window.webkitNotifications){var u;this._menu.forEachItem(function(v){if(v.getValue&&v.getValue()==='browser_notif')u=v;});if(u){o.show(u.getRoot());if(window.webkitNotifications.checkPermission()!==0)u.deselect();}}};t.prototype._onChangeSettingResponse=function(u,v,w){"use strict";r.doSync();};t.prototype._onChangeSettingError=function(u,v,w){"use strict";k.setSetting(u,!v,'sidebar_menu_error');};t.prototype._onChangeFinally=function(){"use strict";this._pendingChange=false;};t.prototype._onOptionChanged=function(u,v){"use strict";var w=v.name,x=v.value;if(this._menuIsRendered){this._menu.forEachItem(function(y){if(y.getValue&&(y.getValue()===w))if(y.isSelected()&&!x){y.deselect();}else if(!y.isSelected()&&x)y.select();});}else this._selectedValues[w]=x;};t.prototype._onClick=function(u,v){"use strict";if(this._pendingChange)return false;var w=false,x=v.item.getValue(),y=true;switch(x){case 'sidebar':this.toggleSidebar();break;case 'online':if(!n.isOnline()){n.goOnline();}else this._logVisibilityChange(x,true);w=true;break;case 'offline':if(n.isOnline()){n.goOffline();}else this._logVisibilityChange(x,true);w=true;break;case 'advanced_settings':case 'turn_off_dialog':h.inform('chat/advanced-settings-dialog-opened');w=true;this._logVisibilityChange(x,false);break;case 'browser_notif':if(!v.item.isSelected()&&window.webkitNotifications&&window.webkitNotifications.checkPermission()!==0){window.webkitNotifications.requestPermission(function(){this.changeSetting(x,!v.item.isSelected());}.bind(this));}else this.changeSetting(x,!v.item.isSelected());w=true;break;case 'sound':this.changeSetting(x,!v.item.isSelected());w=true;break;case 'pause':var z=!v.item.isSelected();if(z){l._pause();}else l._unpause();w=true;y=false;break;case 'close_all_tabs':h.inform('chat/close-all-tabs');this._logVisibilityChange(x,false);w=true;break;case 'show_apps':if(!g.isVisible()){g.showApps();m.resize();}w=true;break;case 'hide_apps':if(g.isVisible()){g.hideApps();m.resize();}w=true;break;}if(w){this.hideMenu();return y;}};t.prototype._logVisibilityChange=function(u,v){"use strict";this._logger.error(v?'sidebar_dropdown_visibility_error':'sidebar_dropdown_set_visibility',{action:u});};t.prototype.changeSetting=function(u,v){"use strict";if(this._pendingChange)return false;this._pendingChange=true;var w={};w[u]=v;k.setSetting(u,v,'sidebar_menu');new i('/ajax/chat/settings.php').setHandler(this._onChangeSettingResponse.bind(this,u,v)).setErrorHandler(this._onChangeSettingError.bind(this,u,v)).setFinallyHandler(this._onChangeFinally.bind(this)).setData(w).setAllowCrossPageTransition(true).send();};t.prototype.hideMenu=function(){"use strict";if(this._menuIsRendered)this._popover.hideLayer();};t.prototype.toggleSidebar=function(){"use strict";j.toggleSidebar();this.hideMenu();return false;};e.exports=t;},null);
__d("ChatSidebarLog",["AsyncSignal","Banzai","BanzaiLogger","Bootloader","csx","DOM","ModuleDependencies","JSLogger","Run","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=n.create('chat_sidebar_load'),r=null,s=false,t=(Math.random()*2147483648|0).toString(36),u=Date.now(),v=null;o.onLoad(function(){s=true;});try{d(['ChatSidebar'],function(ba){r=ba;});}catch(w){q.warn('exception',{reason:w.toString()});}function x(ba,ca){if(ba&&ba.length>ca)return ba[ca];return null;}function y(){if(!v)v=i.create(p({retry:true},h.VITAL));return v;}function z(ba){setTimeout(function(){var ca=m.getMissing('ChatSidebar'),da=j.getErrorUrls(),ea=j.getLoadingUrls(),fa=[];for(var ga in ea)fa.push({url:ga,time:ea[ga]});fa.sort(function(na,oa){return oa.time-na.time;});var ha={};for(var ia=0,ja=fa.length;ia<ja;ia++)ha[fa.url]=fa.time;var ka={start_gap:u-j.getStartTime(),page_loaded:s,page_id:t,timeout:ba,missing_total:ca?ca.length:null,module_1:x(ca,0),module_2:x(ca,1),module_3:x(ca,2),error_url_total:da.length,error_url_1:x(da,0),error_url_2:x(da,1),error_url_3:x(da,2),loading_url_total:fa.length,loading_url_1:x(fa,0)?x(fa,0).url:null,loading_time_1:x(fa,0)?x(fa,0).time:null,loading_url_2:x(fa,1)?x(fa,1).url:null,loading_time_2:x(fa,1)?x(fa,1).time:null,loading_url_3:x(fa,2)?x(fa,2).url:null,loading_time_3:x(fa,2)?x(fa,2).time:null},la=null;if(!r){q.warn('require_'+ba,{missing:ca});la='require';}if(r&&!r.isInitialized()){q.warn('init_'+ba,{missing:ca});la='init';}if(r&&r.isInitialized()&&r.isEnabled()&&r.shouldShowSidebar()){var ma=l.scry(r.getRoot(),"._42fz");if(!ma||ma.length===0){q.warn('render_'+ba,{missing:ca});la='render';}}if(la){ka.symptom=la;new g('/ajax/chat/sidebar_load.php',ka).send();y().log('SidebarLoadFailureLoggerConfig',{start_gap:u-j.getStartTime(),page_loaded:s,page_id:t,timeout:ba,symptom:la});}},ba);}var aa={start:function(){z(5000);z(10000);z(15000);z(30000);z(60000);}};e.exports=aa;},null);
__d("ChatTypeaheadCore",["Event","Keys","TypeaheadCore","copyProperties","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l){for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q,r){"use strict";n.init.call(this,p,q,r);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};o.prototype.keydown=function(event){"use strict";this.data.fetchAll();var p=g.getKeyCode(event);if(p===h.ESC){setTimeout(l(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return n.keydown.call(this,event);};o.prototype.checkValue=function(){"use strict";var p=this.getValue(),q=this.value;if(p==q)return;if(q&&!p){this.typeaheadActive=false;this.informEndActive=true;}else if(!q&&p){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}n.checkValue.call(this);};j(o.prototype,{handleTab:k});e.exports=o;},null);
__d("ChatTypeaheadDataSource",["ChatSortUsers","CurrentUser","DataSource","JSLogger","MercuryParticipantTypes","Run","ShortProfiles"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){for(var n in i)if(i.hasOwnProperty(n))p[n]=i[n];var o=i===null?null:i.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=i;function p(q){"use strict";q=q||{};q.kanaNormalization=true;i.call(this,q);this.persistOnRefresh=q.persistOnRefresh!==false;this.showOfflineUsers=!!q.showOfflineUsers;this._jslog=j.create('chat_typeahead');this._jslog.log('created');}p.prototype.init=function(){"use strict";this._jslog.log('init');o.init.call(this);this._update();};p.prototype.bootstrap=function(){"use strict";this._jslog.log('bootstrap');o.bootstrap.call(this);if(this.showOfflineUsers){this._jslog.log('show_offline_users');this._jslog.log('ensured_short_profiles');if(m.hasAll()){this._update();}else{this._jslog.log('fetch_all_short_profiles');m.fetchAll();this.inform('activity',{activity:true});var q=m.subscribe('updated',function(){this.inform('activity',{activity:false});this._update();}.bind(this));if(!this.persistOnRefresh)l.onLeave(function(){m.unsubscribe(q);});}}};p.prototype.fetchAll=function(){"use strict";m.fetchAll();};p.prototype._update=function(){"use strict";d(['AvailableList'],function(q){var r=this.value;this.dirty();var s=m.getCachedProfileIDs(),t=s.filter(function(v){var w=m.getNow(v);return w.type===k.FRIEND;});t.sort(g.sort);var u=[];t.forEach(function(v){if(v==h.getID())return;var w=q.get(v);if(!this.showOfflineUsers&&w!==q.ACTIVE)return;var x=m.getNow(v),y=x.additionalName;if(x.hasOwnProperty('searchTokens'))y=y?y+' '+x.searchTokens.join(' '):x.searchTokens.join(' ');u.push({uid:v,text:x.name,tokens:y,localized_text:x.name,additional_text:x.additionalName,photo:x.thumbSrc,type:x.type});}.bind(this));if(u.length)this.addEntries(u);this.value=r;if(r)this.query(r);}.bind(this));};p.prototype.refreshData=function(){"use strict";this.fetchAll();d(['AvailableList'],function(q){q.update();}.bind(this));};e.exports=p;},null);
__d("ChatSidebarHeader.react",["React","cx"],function(a,b,c,d,e,f,g,h){var i=g.createClass({displayName:'ReactChatSidebarHeader',render:function(){return this.transferPropsTo(g.DOM.div({className:"_55ob"},g.DOM.div({className:"_55oc"},this.props.children)));}});e.exports=i;},null);
__d("ChatSidebarThread.react",["ChatSidebarItem.react","DOM","WebMessengerPermalinkConstants","React","MercuryThreadMetadataRawRenderer","Tooltip","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n=j.createClass({displayName:'ChatSidebarThread',getInitialState:function(){return {maxNumParticipantsToRender:10};},propTypes:{image:j.PropTypes.string,imageSize:j.PropTypes.number,name:j.PropTypes.string,participants:j.PropTypes.array,numOtherParticipants:j.PropTypes.number,status:j.PropTypes.number,threadID:j.PropTypes.string,unreadCount:j.PropTypes.number},_renderParticipants:function(){var q=[],r=this.props.participants.length,s=this.props.numOtherParticipants,t=Math.min(this.state.maxNumParticipantsToRender,r);if(s-t==1)t--;for(var u=0;u<t;u++){var v=h.create('li');h.setContent(v,this.props.participants[u].name);q.push(v);}if(t<s){v=h.create('li');h.setContent(v,m._("and {num} more...",[m.param("num",s-t)]));q.push(v);}return h.create('ul',{},q);},componentDidMount:function(){l.set(this.getDOMNode(),this._renderParticipants());},render:function(){var q=this.props.name,r=o(this.props.threadID,this.props.participants,this.props.numOtherParticipants),s=q?r:undefined,t=i.getURIPathForThreadID(this.props.threadID),u=p(this.props.image,this.props.participants),v=q?q:r;return (g({context:s,href:{url:t},imageSize:this.props.imageSize,images:u,name:v,status:this.props.status,unreadCount:this.props.unreadCount}));}});function o(q,r,s){return k.renderRawParticipantList(q,r,s,{names_renderer:k.renderShortNames});}function p(q,r){if(q)return q;return r.map(function(s){return s.image_src;});}e.exports=n;},null);
__d("ChatTypeaheadRenderer",["AvailableListConstants","ChatSidebarConstants","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarThread.react","ChatSidebarUser.react","ChatTypeaheadConstants","DOM","LastMobileActiveTimes","MercuryParticipants","PresenceStatus","React"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){var s={};function t(y,z){if(!(y in s))s[y]=n.create('li');r.renderComponent(z,s[y]);return s[y];}function u(y){return t(y.text,i(null,y.text));}function v(y){var z=y.mercury_thread.participants.map(function(aa){return p.getUserID(aa);});return t(y.uid,k({image:y.mercury_thread.image_src,imageSize:h.getImageSize(),name:y.mercury_thread.name,participants:y.participants_to_render,numOtherParticipants:z.length-1,status:q.getGroup(z),threadID:y.uid}));}function w(y){var z=q.get(y.uid),aa=(z===g.MOBILE)?o.getShortDisplay(y.uid):null,ba=(y.render_type==m.NON_FRIEND_TYPE||y.render_type==m.FB4C_TYPE)?y.subtext:null,ca=null;if(z===g.ACTIVE)ca=q.getDetailedActivePresence(y.uid);return t(y.uid,l({image:y.photo,imageSize:h.getImageSize(),name:y.text,sectionName:j.TYPEAHEAD,status:z,birthday:q.isBirthday(y.uid),statusTime:aa,detailedStatus:ca,userID:y.uid,context:ba}));}function x(y,z){if(y.type===m.HEADER_TYPE)return u(y);if(y.type==m.THREAD_TYPE)return v(y);return w(y);}e.exports=x;},null);
__d("ChatTypeaheadView",["BucketedTypeaheadView","ChatConfig","ChatTypeaheadConstants","CurrentUser","MercuryThreadSearchUtils","arrayContains","fbt","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=h.get('divebar_typeahead_group_fof',0);for(var p in g)if(g.hasOwnProperty(p))r[p]=g[p];var q=g===null?null:g.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=g;function r(s,t){"use strict";g.call(this,s,t);this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:"FRIENDS OF FRIENDS"};this.typeObjectsOrder.push(i.NON_FRIEND_TYPE);this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:"GROUP CONVERSATIONS"};this.typeObjectsOrder.push(i.THREAD_TYPE);this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:"CO-WORKERS"};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:"FRIENDS"};this.typeObjectsOrder.push(i.FB4C_TYPE);this.typeObjectsOrder.push(i.FRIEND_TYPE);}r.prototype.buildBuckets=function(s,t){"use strict";if(o){t=t.reverse();t=t.filter(function(u){var v=u.render_type||u.type;if(v==='thread'){var w='fbid:'+j.getID();if(!l(u.mercury_thread.participants,w))return false;var x=u.participants_to_render.some(function(z){return k.queryMatchesName(s,z.name);}),y=k.queryMatchesName(s,u.mercury_thread.name);if(!x&&!y)return false;}return true;});}t=q.buildBuckets.call(this,s,t);if(!o)t=t.filter(function(u){return u&&!u.disabled;});return t;};r.prototype.getDefaultIndex=function(s){"use strict";if(!o)return q.getDefaultIndex.call(this,s);if(s.length===0)return -1;var t=s.length-1;while(!this.isHighlightable(s[t])&&t>=0)t--;return t;};e.exports=r;},null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],function(a,b,c,d,e,f,g,h,i){var j='/ajax/notifications/impression.php';function k(l,m){var n={ref:m};h.untokenizeIDs(l).forEach(function(o,p){n['alert_ids['+p+']']=o;});new g(i(j).getQualifiedURI().toString(),n).send();}e.exports={log:k};},null);
__d("NotificationBeeperItemContents.react",["Animation","CloseButton.react","ImageBlock.react","NotificationURI","NotificationUserActions","React","TextWithEntities.react","Timestamp.react","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(r,s){return l.DOM.span({className:"fwb"},r);}var q=l.createClass({displayName:'NotificationBeeperItemContents',_markAsRead:function(){k.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(this.refs.inner.getDOMNode()).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(r){if(r.beep.beepID!==this.props.beep.beepID){this._doFlash();this.props.onReadyToHide(this.props.beep.notificationID);}},render:function(){var r=this.props.beep,s=r.icon.uri,t=r.link?j.localize(r.link):'#',u=r.photo&&j.snowliftable(t),v=u?t:r.ajaxifyLink,w=u?'theater':(v?'dialog':null);return (l.DOM.div({ref:"inner"},h({className:"_3soc",onClick:this._onClose,size:"medium"}),l.DOM.a({href:t,ajaxify:v,onClick:this._markAsRead,rel:w,className:"_3soi"},i({className:"_3soj",spacing:"medium"},l.DOM.img({src:r.actors[0].profile_picture.uri,className:"_3sok"}),l.DOM.div({className:"_3sol"},m({renderEmoticons:true,renderEmoji:true,interpolator:p,ranges:r.text.ranges,aggregatedranges:r.text.aggregated_ranges,text:r.text.text}),i({className:"_3som"},l.DOM.img({className:"_1x8t",src:s}),n({time:r.timestamp.time,text:r.timestamp.text,verbose:r.timestamp.verbose})))))));}});e.exports=q;},null);
__d("NotificationBeeperConst",["keyMirror"],function(a,b,c,d,e,f,g){var h={IDLE_DELAY:10000,ACTIVE_DELAY_LONG:4000,FADE_OUT_LENGTH:1500,BeepStates:g({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};e.exports=h;},null);
__d("NotificationBeeperItem.react",["Animation","BrowserSupport","NotificationBeeperItemContents.react","React","NotificationBeeperItemRenderersList","Style","NotificationBeeperConst","cx","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=j.createClass({displayName:'NotificationBeeperItem',getInitialState:function(){return {fadedIn:false,hidden:false};},componentDidMount:function(){var q;if(h.hasCSSAnimations()){q=this.setState.bind(this,{fadedIn:true},null);}else q=function(){new g(this.refs.item.getDOMNode()).from('top','-30px').from('opacity','0').to('top','0px').to('opacity','1').duration(200).ondone(this.setState.bind(this,{fadedIn:true},null)).go();}.bind(this);o(q,50);this.props.onInserted(this.props.beep);},componentWillUnmount:function(){if(this._fadeOutAnimation){this._fadeOutAnimation.stop();this._fadeOutAnimation=null;}},_onHide:function(){this.setState({hidden:true});},render:function(){var q=this.props.beep,r=(("_3sod")+(this.state.fadedIn?' '+"_3soe":'')+(this.state.hidden?' '+"_3sof":'')),s=this._getRenderer(q.beepRenderer);return (j.DOM.li({className:r,ref:"item",'data-gt':q.tracking},s({beep:q,onHide:this._onHide,onReadyToHide:this.props.onReadyToHide,ref:"itemContents"})));},componentDidUpdate:function(q,r,s){if(this.props.fadingOut){if(!this._fadeOutAnimation)this._fadeOutAnimation=new g(this.refs.item.getDOMNode()).from('opacity','1').to('opacity','0').duration(m.FADE_OUT_LENGTH).ondone(this._onHide).go();this.refs.item.getDOMNode().style.transitionDuration='0ms';}else if(this._fadeOutAnimation){this._fadeOutAnimation.stop();this._fadeOutAnimation=null;l.set(this.refs.item.getDOMNode(),'opacity','1');}},_getRenderer:function(q){if(q in k)return k[q];return i;}});e.exports=p;},null);
__d("NotificationSound",["Sound","copyProperties"],function(a,b,c,d,e,f,g,h){var i=5000;g.init(['audio/mpeg']);function j(k){this._soundPath=k;this._lastPlayed=0;}h(j.prototype,{play:function(k){if(!this._soundPath)return;var l=Date.now();if((l-this._lastPlayed)<i)return;this._lastPlayed=l;g.play(this._soundPath,k);}});e.exports=j;},null);
__d("NotificationBeeper.react",["Arbiter","ChannelConstants","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationPhotoThumbnail","NotificationSound","NotificationUpdates","NotificationUserActions","React","NotificationBeeperConst","NotificationBeeperPinnedPostLoader","cx","isEmpty","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=q.BeepStates,x='beeper',y=j.PayloadSourceType.LIVE_SEND,z=j.PayloadSourceType.OTHER_APPLICATION,aa=p.createClass({displayName:'NotificationBeeper',propTypes:{},getInitialState:function(){return {soundEnabled:this.props.soundEnabled,hovering:false,fading:false,paused:false,beeps:{}};},componentWillMount:function(){var ca=h.getArbiterType('notif_sound_pref_changed'),da='update-notifications';this.subscriptions=[n.subscribe(da,function(ea,fa){if(fa.payloadsource===y||fa.payloadsource===z){var ga=fa.nodes;if(ga&&ga.length)this._handleBeepChanges(ba(ga));}}.bind(this)),g.subscribe(h.getArbiterType('beeper/update'),function(ea,fa){fa=fa.obj;var ga=fa.nodes;if(ga&&ga.length)this._handleBeepChanges(ba(ga));}.bind(this)),g.subscribe(ca,function(ea,fa){this.setState({soundEnabled:fa.obj.enabled});}.bind(this))];g.inform('NotificationBeeper/mounted',null,g.BEHAVIOR_PERSISTENT);if(r.payload)this._handleBeepChanges(ba(r.payload.nodes));},componentWillUnmount:function(){this.subscriptions.forEach(function(ca){ca.unsubscribe();});this.subscriptions=null;},_onMouseEnter:function(){if(this.state.paused)return;this._hideWait&&clearTimeout(this._hideWait);var ca=[],da=this.state.beeps;Object.keys(da).forEach(function(ea){if(da[ea].state!=w.PENDING){ca.push(ea);}else da[ea].state=w.RENDERED;});o.markNotificationsAsSeen(ca);this.setState({hovering:true,fading:false,beeps:da});},_onMouseLeave:function(){if(this.state.paused)return;this._waitToHide(q.ACTIVE_DELAY_LONG);this.setState({hovering:false});},_onInsertedItem:function(ca){if(!this.state.hovering)this._waitToHide();if(this.state.soundEnabled&&ca.sound){if(!this._notifSound)this._notifSound=new m(this.props.soundPath);this._notifSound.play(ca.beepID);}if(this.props.shouldLogImpressions)k.log([ca.notificationID],x);},_waitToHide:function(ca){this._hideWait&&clearTimeout(this._hideWait);this._hideWait=u(v(this._hide,this),(ca||q.IDLE_DELAY)*(this.props.slowFade?2:1));},_onReadyToHide:function(ca){this.state.beeps[ca].state=w.READY_TO_HIDE;if(!this._hideWait)this._waitToHide();},_hide:function(){this._hideWait=null;var ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state==w.READY_TO_HIDE)ca[da].state=w.FADING_OUT;});this.setState({fading:true});u(v(this._finishHide,this),q.FADE_OUT_LENGTH);},_finishHide:function(){if(!this.state.fading)return;var ca=this.state.beeps;Object.keys(ca).forEach(function(da){if(ca[da].state==w.FADING_OUT)delete ca[da];});this.setState({fading:false,beeps:ca});u(function(){var da=this.state.beeps;Object.keys(da).forEach(function(ea){if(da[ea].state==w.PENDING)da[ea].state=w.RENDERED;});this.setState({beeps:da});}.bind(this));},_handleBeepChanges:function(ca){var da=this.state.fading?w.PENDING:w.RENDERED,ea=this.state.beeps,fa=false;Object.keys(ca).reverse().forEach(function(ga){var ha={state:da,data:ca[ga]};if(!ea[ga]||ea[ga].data.beepID!=ha.data.beepID){if(ea[ga]){fa=true;if(ha.data.beepUpdatesOnTop)delete ea[ga];}ea[ga]=ha;}});if(fa&&!this.state.paused)this._waitToHide();this.forceUpdate();},_togglePause:function(){if(!this.state.paused){this._hideWait&&clearTimeout(this._hideWait);}else this._waitToHide();this.setState({paused:!this.state.paused,fading:false});},render:function(){var ca=this.state.beeps,da={};Object.keys(ca).reverse().forEach(function(ha){var ia=ca[ha];if(ia.state==w.PENDING)return;da[ha]=i({fadingOut:this.state.fading&&ia.state==w.FADING_OUT,beep:ia.data,onInserted:this._onInsertedItem,onReadyToHide:this._onReadyToHide});},this);var ea=!t(da),fa=null;if(ea&&this.props.canPause)fa=p.DOM.li({className:"_a_g",onClick:this._togglePause},this.state.paused?'Continue':'Pause [fb]');var ga=((!ea?"hidden_elem":'')+(' '+"_50d1"));return (p.DOM.ul({ref:"container",className:ga,'data-gt':this.props.tracking,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},da,fa));}});function ba(ca){var da={};ca.forEach(function(ea){if(!ea.showBeep)return;var fa=ea.alert_id,ga=fa+'-'+ea.receivedTime,ha=l.getThumbnail(ea.attachments,ea.attached_story);da[fa]={notificationID:fa,beepID:ga,beepRenderer:ea.beepRenderer,rendererData:ea.rendererData,beepUpdatesOnTop:ea.beepUpdatesOnTop,actors:ea.unaggregatedActors||ea.actors,icon:ea.icon,link:ea.url,ajaxifyLink:ea.ajaxify_url,photo:ha,text:ea.unaggregatedTitle||ea.title,timestamp:ea.timestamp,receivedTime:ea.receivedTime,sound:!!ea.sound,tracking:ea.tracking};});return da;}e.exports=aa;},null);
__d("XGamesGripperNoteUpdaterControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/async\/games\/gripper_note_viewed\/",{});},null);
__d("SidebarAppTickerResizer",["Animation","Arbiter","AsyncRequest","ChatSidebar","CSS","cx","debounce","DOMQuery","Event","SimpleDrag","$","XGamesGripperNoteUpdaterControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=1e-07,s=1,t=85,u=173,v=300,w=46,x=90,y=82;function z(aa,ba,ca,da){"use strict";this.$SidebarAppTickerResizer0=q('pagelet_ticker');this.$SidebarAppTickerResizer1=q('pagelet_canvas_nav_content');this.$SidebarAppTickerResizer2=this.$SidebarAppTickerResizer0.parentNode;this.$SidebarAppTickerResizer1.style.height=ca;this.$SidebarAppTickerResizer3(aa,ba);if(ca===null)if(da!==null){this.$SidebarAppTickerResizer4();this.$SidebarAppTickerResizer5(this.$SidebarAppTickerResizer6());}else h.subscribe('AppsDivebar/show-apps',this.$SidebarAppTickerResizer4.bind(this));if(da){var ea=n.scry(document.body,'#pagelet_ticker')[0],fa=ea&&ea.parentNode,ga,ha=function(){if(!k.shown(fa))return;var ia=b('XGamesGripperNoteUpdaterControllerURIBuilder'),ja=(new ia()).getURI();new i().setURI(ja).send();da.show();if(ga)ga.unsubscribe();};if(fa&&k.shown(fa)){ha();}else ga=h.subscribe('ticker/show',ha);}this.$SidebarAppTickerResizer7=m(this.$SidebarAppTickerResizer4.bind(this),200);o.listen(window,'resize',this.$SidebarAppTickerResizer7);}z.prototype.$SidebarAppTickerResizer4=function(){"use strict";this.$SidebarAppTickerResizer8();var aa=Math.round(parseFloat(this.$SidebarAppTickerResizer0.style.height));if(aa>Math.round(this.$SidebarAppTickerResizer9())||this.$SidebarAppTickerResizera&&this.$SidebarAppTickerResizera>s){var ba=(this.$SidebarAppTickerResizera/this.$SidebarAppTickerResizerb)*100,ca=this.$SidebarAppTickerResizerc(0,this.$SidebarAppTickerResizer9()-ba);this.$SidebarAppTickerResizerd(ca);j.resize();}};z.prototype.$SidebarAppTickerResizer9=function(){"use strict";if(!j.isVisible())return x;return Math.min(x,(this.$SidebarAppTickerResizerb-this.$SidebarAppTickerResizere-y)*100/this.$SidebarAppTickerResizerb);};z.prototype.$SidebarAppTickerResizer3=function(aa,ba){"use strict";var ca=new p(aa);ca.subscribe('start',this.$SidebarAppTickerResizerf.bind(this));ca.subscribe(['update','end'],this.$SidebarAppTickerResizerg.bind(this));var da=new p(ba);da.subscribe('start',this.$SidebarAppTickerResizerf.bind(this));da.subscribe('update',this.$SidebarAppTickerResizerh.bind(this));da.subscribe('end',this.$SidebarAppTickerResizeri.bind(this));};z.prototype.$SidebarAppTickerResizerf=function(aa,event){"use strict";this.$SidebarAppTickerResizerj=event.clientY;this.$SidebarAppTickerResizer8();this.$SidebarAppTickerResizerk();};z.prototype.$SidebarAppTickerResizer8=function(){"use strict";this.$SidebarAppTickerResizere=this.$SidebarAppTickerResizer1.offsetTop;this.$SidebarAppTickerResizerl=this.$SidebarAppTickerResizer0.offsetHeight;this.$SidebarAppTickerResizerb=this.$SidebarAppTickerResizer2.offsetHeight;this.$SidebarAppTickerResizera=this.$SidebarAppTickerResizer1.offsetHeight;this.$SidebarAppTickerResizerm=this.$SidebarAppTickerResizera;};z.prototype.$SidebarAppTickerResizerk=function(){"use strict";k.addClass(this.$SidebarAppTickerResizer2,"_4vfq");};z.prototype.$SidebarAppTickerResizern=function(){"use strict";k.removeClass(this.$SidebarAppTickerResizer2,"_4vfq");};z.prototype.$SidebarAppTickerResizerg=function(aa,event){"use strict";var ba=(this.$SidebarAppTickerResizera/this.$SidebarAppTickerResizerb)*100,ca=this.$SidebarAppTickerResizerc(event.clientY-this.$SidebarAppTickerResizerj,this.$SidebarAppTickerResizer9()-ba);if(aa=='end'){this.$SidebarAppTickerResizern();this.$SidebarAppTickerResizerd(ca);}j.resize();};z.prototype.$SidebarAppTickerResizerh=function(aa,event){"use strict";var ba=-this.$SidebarAppTickerResizera,ca=this.$SidebarAppTickerResizer6()-this.$SidebarAppTickerResizera,da=this.$SidebarAppTickerResizero(event.clientY-this.$SidebarAppTickerResizerj,ba,ca);this.$SidebarAppTickerResizerc(-da,this.$SidebarAppTickerResizer9());this.$SidebarAppTickerResizerm=this.$SidebarAppTickerResizera+da;this.$SidebarAppTickerResizerm=Math.max(s,this.$SidebarAppTickerResizerm);this.$SidebarAppTickerResizer1.style.height=this.$SidebarAppTickerResizerm+'px';};z.prototype.$SidebarAppTickerResizeri=function(aa,event){"use strict";var ba=this.$SidebarAppTickerResizerm,ca=this.$SidebarAppTickerResizerq(this.$SidebarAppTickerResizerm),da=this.$SidebarAppTickerResizerc(this.$SidebarAppTickerResizera-ca,this.$SidebarAppTickerResizer9());if(this.$SidebarAppTickerResizera!=ca){this.$SidebarAppTickerResizer5(ca);this.$SidebarAppTickerResizerd(da);}new g(this.$SidebarAppTickerResizer1).from('height',ba).to('height',ca).duration(v).go();};z.prototype.$SidebarAppTickerResizerc=function(aa,ba){"use strict";var ca=this.$SidebarAppTickerResizerl+aa,da=(ca/this.$SidebarAppTickerResizerb)*100;da=Math.max(r,Math.min(ba,da));this.$SidebarAppTickerResizer0.style.height=da+'%';return da;};z.prototype.$SidebarAppTickerResizerq=function(aa){"use strict";var ba=this.$SidebarAppTickerResizerr(),ca=this.$SidebarAppTickerResizer6();return (aa<(ca-w))?((aa<(ba-w))?s:ba):ca;};z.prototype.$SidebarAppTickerResizerr=function(){"use strict";return t;};z.prototype.$SidebarAppTickerResizer6=function(){"use strict";return u;};z.prototype.$SidebarAppTickerResizers=function(aa){"use strict";var ba=this.$SidebarAppTickerResizer6();return (aa<0)?s:(aa>ba?ba:aa);};z.prototype.$SidebarAppTickerResizero=function(aa,ba,ca){"use strict";return (aa<ba)?ba:((aa>ca)?ca:aa);};z.prototype.$SidebarAppTickerResizerd=function(aa){"use strict";new i('/ajax/feed/ticker/resize').setData({height:''+aa}).setMethod('POST').send();h.inform('Ticker/resized');};z.prototype.$SidebarAppTickerResizer5=function(aa){"use strict";new i('/ajax/feed/apps/resize').setData({height:''+aa}).setMethod('POST').send();};e.exports=z;},null);
__d("SidebarTicker",["Arbiter","ChatSidebar","CSS","DOM","Run","TickerController","$","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){this._ticker=m('pagelet_ticker');this._initSubscriptions();if(i.hasClass(document.documentElement,'sidebarMode'))this._onSidebarShow();}o.hide=function(){k.onAfterLoad(function(){j.remove(m('pagelet_ticker'));j.remove(j.find(document.body,'div.fbSidebarGripper'));h.resize();});};n(o.prototype,{_initSubscriptions:function(){this._subscriptions=[g.subscribe('sidebar/show',this._onSidebarShow.bind(this))];},_onSidebarShow:function(){l.show(this._ticker);}});e.exports=o;},null);
__d("TickerRightHideController",["CSS","DOM","ge"],function(a,b,c,d,e,f,g,h,i){function j(){}j._markAsClosedHelper=function(k){var l=i('pagelet_reminders');if(l){var m=h.scry(l,'div.tickerToggleWrapper')[0];if(m)g.conditionClass(m,'displayedTickerToggleWrapper',k);}var n=i('pagelet_moments');if(n){var o=h.scry(n,'div.tickerToggleWrapper')[0];if(o)g.conditionClass(o,'displayedTickerToggleWrapper',k);}var p=i('pagelet_rhc_ticker');if(p){var q=h.scry(p,'div.tickerToggleWrapper')[0];if(q)g.conditionClass(q,"displayedTickerToggleWrapper",!k);g.conditionClass(p,"hidden_rhc_ticker",k);}};j.markAsClosed=function(){j._markAsClosedHelper(true);};j.markAsUnclosed=function(){j._markAsClosedHelper(false);};e.exports=j;},null);
__d("legacy:TickerRightHideController",["TickerRightHideController"],function(a,b,c,d){a.TickerRightHideController=b('TickerRightHideController');},3);
__d("GameInviteNotificationBeeperItemContents.react",["Animation","CloseButton.react","ImageBlock.react","NotificationUserActions","React","GameInvite.react","GameInviteStatusEnum","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=k.createClass({displayName:'GameInviteNotificationBeeperItemContents',_markAsRead:function(){j.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new g(this.refs.inner.getDOMNode()).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(p){if(this.props.beep.rendererData.status!=m.PENDING&&p.beep.rendererData.status==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onInviteStatusUpdate:function(p,q){if(p!=m.PENDING&&q==m.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var p=this.props.beep,q=p.rendererData;return (k.DOM.div({ref:"inner"},h({className:"_3soc",onClick:this._onClose,size:"medium"}),i({className:"_3soj"},k.DOM.img({src:p.actors[0].profile_picture.uri,className:"_3sok"}),k.DOM.div({className:"_3sol"},l({app:q.app,creationTime:q.creation_time,inviteId:q.id.toString(),receiver:q.receiver,sender:q.sender,status:q.status,timeout:q.timeout,timeRemaining:q.time_remaining,viewerId:q.receiver.id,onStatusUpdate:this.onInviteStatusUpdate})))));}});e.exports=o;},null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","copyProperties","emptyFunction","shield"],function(a,b,c,d,e,f,g,h,i,j,k){function l(m){this.eventName=m;this.subs=null;this.handler=j;this.shutdownHandler=null;this.registered=false;this.appId=1;}i(l,{getAppMessageType:function(m,n){return 'live_message/'+m+':'+n;},route:function(m){var n=function(o){var p=l.getAppMessageType(m.app_id,m.event_name);g.inform(p,o,g.BEHAVIOR_PERSISTENT);};n(m.response);}});i(l.prototype,{setAppId:function(m){this.appId=m;return this;},setHandler:function(m){this.handler=m;this._dirty();return this;},setRestartHandler:j,setShutdownHandler:function(m){this.shutdownHandler=k(m);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var m=function(o,p){return this.handler(p);}.bind(this),n=l.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=g.subscribe(n,m);if(this.shutdownHandler)this.subs.shut=g.subscribe(h.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var m in this.subs)if(this.subs[m])this.subs[m].unsubscribe();this.subs=null;this.registered=false;return this;}});e.exports=l;},null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],function(a,b,c,d,e,f,g,h,i){g.subscribe(h.getArbiterType('app_msg'),function(j,k){i.route(k.obj);});},null);
__d("Slideshow",["ArbiterMixin","CSS","DOM","Event","Locale","Parent","csx","cx","getActiveElement","mixin","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r=p(g);for(var s in r)if(r.hasOwnProperty(s))u[s]=r[s];var t=r===null?null:r.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=r;function u(v,w){"use strict";this._root=v;this._config=w;this._currentIndex=0;this._animating=false;this._autoplayTimer=null;this._init();}u.prototype.getIndex=function(){"use strict";return this._currentIndex;};u.prototype.getNumItems=function(){"use strict";return this._items.length;};u.prototype.page=function(v){"use strict";if(typeof v==='undefined')v='next';if(v==='next'){if(this._config.wrap||this.getIndex()<this.getNumItems()-1)this._animateTo(this._currentIndex+1);}else if(v==='prev')if(this._config.wrap||this.getIndex()>0)this._animateTo(this._currentIndex-1);};u.prototype.pageTo=function(v){"use strict";this._animateTo(v,q(this._setCurrent,this,v));};u.prototype.insert=function(v,w){"use strict";if(v>this._currentIndex){i.insertAfter(this._items[v-1],w);}else{i.insertBefore(this._items[v],w);this._currentIndex++;}this._items.splice(v,0,w);this._updateArrowState(this._currentIndex);this.inform('items_updated');};u.prototype.push=function(v){"use strict";this.insert(this._items.length,v);};u.prototype._init=function(){"use strict";this._container=i.find(this._root,"ul._2xq");this._items=i.scry(this._container,"li._2xr");if(this._config.arrows){j.listen(this._root,'click',this._clickListener.bind(this));var v=i.find(this._root,"a._2xw"),w=i.find(this._root,"a._2xx");this._arrowLeft=k.isRTL()?v:w;this._arrowRight=k.isRTL()?w:v;}if(this._config.autoplay){j.listen(this._root,'mouseenter',this.stopAutoplay.bind(this));j.listen(this._root,'mouseleave',this.resetAutoplay.bind(this));this.resetAutoplay();}this.subscribe(['page_start','page_end'],function(x,y){h.conditionClass(this._root,"_2xm",x==='page_start');}.bind(this));};u.prototype._clickListener=function(event){"use strict";var v=event.getTarget(),w=l.byTag(v,'a');if(w&&!h.hasClass(w,"_2xo"))if(h.hasClass(w,"_2xw")){this.page('next');}else if(h.hasClass(w,"_2xx"))this.page('prev');};u.prototype._updateArrowState=function(v){"use strict";if(!this._config.arrows)return;h.conditionClass(this._arrowRight,"_2xo",this._items.length===1);h.conditionClass(this._arrowLeft,"_2xo",this._items.length===1);};u.prototype._animateTo=function(v){"use strict";};u.prototype._setCurrent=function(v){"use strict";h.removeClass(this._items[this._currentIndex],"_2xn");h.addClass(this._items[v],"_2xn");h.removeClass(this._root,"_2xm");var w=i.scry(this._items[this._currentIndex],'a').some(function(y){return y==o();});if(w){var x=i.scry(this._items[v],'a');if(x[0])x[0].focus();}this._currentIndex=v;this._animating=false;this.inform('page_end',v);};u.prototype.resetAutoplay=function(){"use strict";if(this._config.autoplay){clearTimeout(this._autoplayTimer);this._autoplayTimer=setTimeout(this._autoplay.bind(this),this._config.autoplayTimeout);}};u.prototype.stopAutoplay=function(){"use strict";clearTimeout(this._autoplayTimer);this._autoplayTimer=null;};u.prototype._autoplay=function(){"use strict";this.resetAutoplay();if(this._items.length>1)this.page();};e.exports=u;},null);
__d("Carousel",["Animation","CSS","Ease","Locale","Slideshow","Style","cx","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=j.isRTL()?'right':'left',p=i.sineInOut;for(var q in k)if(k.hasOwnProperty(q))s[q]=k[q];var r=k===null?null:k.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=k;function s(t,u){"use strict";k.call(this,t,u);this.subscribe('items_updated',this._updateItemState.bind(this));}s.prototype._updateItemState=function(t,u){"use strict";this._setContainerPos(t);l.set(this._container,'width',(this._items.length*this._config.width)+'px');};s.prototype._updateArrowState=function(t){"use strict";if(!this._config.arrows)return;var u=this._config.wrap,v=this._items.length,w=Math.floor(v/this._config.photosperframe);h.conditionClass(this._arrowRight,"_2xo",w===1||(!u&&t===w-1));h.conditionClass(this._arrowLeft,"_2xo",w===1||(!u&&t===0));};s.prototype._animate=function(t,u){"use strict";var v=(t===-1)?this._items.length-1:t;this._animating=true;this.inform('page_start',v);new g(this._container).to(o,-t*this._config.width).duration(this._config.animationDuration).ease(p).ondone(u).go();};s.prototype._setContainerPos=function(t){"use strict";l.set(this._container,o,-t*this._config.width+'px');};s.prototype._animateTo=function(t){"use strict";if(this._animating)return;var u=this._items.length;if((0<=t&&t<u)||!this._config.wrap){var v=(t+u)%u;this._updateArrowState(v);return this._animate(v,n(this._setCurrent,this,v));}var w=t%u,x=w?u-1:0,y=this._items[u-1];l.set(y,'position','absolute');l.set(y,o,-this._config.width+'px');if(x===0)this._setContainerPos(-1);this._animate(w,function(){l.set(y,'position','static');l.set(y,o,'auto');this._setContainerPos(x);this._setCurrent(x);}.bind(this));};e.exports=s;},null);