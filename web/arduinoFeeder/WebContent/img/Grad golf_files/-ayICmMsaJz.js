/*!CK:296626918!*//*1402003008,178179405*/

if (self.CavalryLogger) { CavalryLogger.start_js(["aLh3h"]); }

__d("XAdPreferencesInterestsEditControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/edit_interests\/",{ad_id:{type:"Int",required:true},interest_fbids_to_add:{type:"IntVector"},interest_fbids_to_remove:{type:"IntVector"},cluster_fbids_to_add:{type:"IntVector"},cluster_fbids_to_remove:{type:"IntVector"}});},null);
__d("XAdPreferencesNUXControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/nux\/",{type:{type:"String",required:true}});},null);
__d("XAdsPreferencesFeedbackControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/ads\/preferences\/feeedback\/",{ad_id:{type:"Int",required:true},favorite:{type:"Enum",required:true}});},null);
__d("AdsPrefs",["AsyncRequest","CSS","DOM","Event","tidyEvent","cx","csx","XAdPreferencesInterestsEditControllerURIBuilder","XAdPreferencesNUXControllerURIBuilder","XAdsPreferencesFeedbackControllerURIBuilder"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(t,u){var v=i.scry(t.parentNode,"div._g1j")[0],w=h.hasClass(v,"_2zny")?'interest_fbids_to_add':'interest_fbids_to_remove',x=new n().setInt('ad_id',u).setIntVector(w,[v.getAttribute('data-id')]).getURI(),y=new g(x);y.send();h.toggleClass(v,"_2zny");return v;}function r(t,u){h.toggleClass(t,"hidden_elem");var v=h.hasClass(t,"hidden_elem")?'ad_useful':'ad_neutral',w=new p().setInt('ad_id',u).setEnum('favorite',v).getURI(),x=new g(w);x.send();}var s={initRHCFeedback:function(t,u,v){k(j.listen(u,'click',function(w){r(v,t);w.kill();}));},initSuggestions:function(t,u,v){k(j.listen(u,'click',function(w){q(w.target,t);}));if(v)k(j.listen(v,'click',function(){i.scry(u,'li').forEach(function(w){h.show(w);});h.hide(v);}));},initMatchingInterests:function(t,u,v){k(j.listen(u,'click',function(w){var x=q(w.target,t);if(v&&x&&h.hasClass(x,"_2zny")){v.setContext(x);v.show();v=null;}}));},initAdvertiserCard:function(t){k(j.listen(t,'click',function(u){var v=i.scry(t,"div._4r42")[0],w=i.scry(t,"._4r43")[0],x=i.scry(t,"._1uhj")[0];h.toggleClass(w,'hidden_elem');h.toggleClass(x,'hidden_elem');h.toggleClass(v,'hidden_elem');}));},toggleFavorite:function(t){var u=i.find(t.getRoot(),'img');r(u,t.getLabel());},registerNUX:function(){var t=new o().setString('type','dialog_nux_seen_count').getURI();new g(t).send();}};e.exports=s;},null);
__d("EntstreamFeedObject",["Parent","cx"],function(a,b,c,d,e,f,g,h){var i={getRoot:function(j){return g.byClass(j,"_5jmm");}};e.exports=i;},null);
__d("EntstreamFeedObjectFollowup",["CSS","DOM","EntstreamFeedObject","Event","csx","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){var n={getFollowup:function(o){var p=h.scry(o,"._5lum");if(!p.length)p=h.scry(o.parentNode,"._5lum");return p?p[0]:null;},initCloseButton:function(o){var p=h.find(o,"._5xsl"),q=j.listen(p,'click',function(){q.remove();h.remove(o);});o.listener=q;},stopListenCloseButton:function(o){if(o.listener)o.listener.remove();},addFollowup:function(o,p,q){var r=g.hasClass(o,"_5pat"),s=h.create('div',{className:"_5lum"});if(r){g.addClass(s,"_5pau");}else g.addClass(s,"_1f84");if(q)g.addClass(s,q);if(p){h.appendContent(s,p);this.initCloseButton(s);h.insertBefore(o,s);}else{var t=n.getFollowup(o);if(t)this.removeFollowup(t);h.prependContent(o,s);}return s;},removeFollowup:function(o){var p=n.getFollowup(o);this.stopListenCloseButton(p);h.remove(p);},appendToFollowup:function(o,p){var q=i.getRoot(m(o)),r=n.getFollowup(q);h.appendContent(r,p);},getFollowupMessage:function(o){var p=h.find(o,"._1f86");return p;},replaceFollowupMessage:function(o,p){this.stopListenCloseButton(o);var q=n.getFollowupMessage(o);h.replace(q,p);this.initCloseButton(o);}};e.exports=n;},null);
__d("EntstreamFeedObjectFollow",["EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","Parent","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m={toggleFollow:function(n,o,p){var q=n.getValue()=='follow_post'?p.follow_post:p.unfollow_post,r=g.getRoot(l(o)),s=h.getFollowup(r);if(s){h.replaceFollowupMessage(s,q);}else{s=h.addFollowup(r,q,"_521o")||h.getFollowup(r);i.listen(s,'click',function(event){var t=event.getTarget(),u="_1f89";if(j.byClass(t,u)){m.toggleFollow(n,o,p);n.toggleMenuItem();}});}}};e.exports=m;},null);
__d("EntstreamFeedObjectHide",["Event","CSS","EntstreamFeedObject","EntstreamFeedObjectFollowup","Focus","TabbableElements","cx","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o={hide:function(p,q){var r=i.getRoot(n(p));j.addFollowup(r,q);h.addClass(r,"_i6m");o.setFocus(r);},registerUnhide:function(p,q){g.listen(p,'click',function(){if(q)q.send();o.unhide(i.getRoot(p));});},setFocus:function(p){var q=l.find(p);if(q&&q[0])k.setWithoutOutline(q[0]);},unhide:function(p){j.removeFollowup(p);h.removeClass(p,"_i6m");o.setFocus(p);}};e.exports=o;},null);
__d("YouTube",["CSS","DOM","DOMQuery","Event","Keys","LitestandStoryInsertionStatus","SubscriptionsHandler","UserAgent","Focus","copyProperties","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s,t,u){"use strict";var v=new m();v.addSubscriptions(j.listen(s,'load',this.listening.bind(this)),l.registerBlocker(function(){return this.playerState===r.STATE_PLAYING;}.bind(this)));p(this,{iframe:s,autofocus:t,autoplay:u,playerState:r.STATE_UNSTARTED,muted:false,volume:100,currentTime:0,timer:null,handler:v});if(t)o.set(s);}r.prototype.id=function(){"use strict";return this.iframe.id;};r.prototype.post=function(s){"use strict";s.id=this.id();this.iframe.contentWindow.postMessage(JSON.stringify(s),'*');};r.prototype.listening=function(){"use strict";this.post({event:'listening'});clearTimeout(this.timer);this.timer=setTimeout(this.listening.bind(this),100);};r.prototype.update=function(s){"use strict";if(s.event=='initialDelivery'){clearTimeout(this.timer);if((n.webkit()||n.firefox())&&s.info&&s.info.debugText.match(/flashVersion/)){this.addAccessibleButtons();if(n.firefox())this.iframe.tabIndex=-1;}}if(s.info)['playerState','muted','volume','currentTime'].forEach(function(t){if(s.info.hasOwnProperty(t))this[t]=s.info[t];}.bind(this));};r.prototype.togglePlay=function(){"use strict";this.post({event:'command',func:(this.playerState==r.STATE_PLAYING)?'pauseVideo':'playVideo'});};r.prototype.toggleMute=function(){"use strict";this.post({event:'command',func:this.muted?'unMute':'mute'});};r.prototype.addAccessibleButtons=function(){"use strict";this.addAccessibleButton('Mute',"_505m",this.toggleMute.bind(this));this.addAccessibleButton('Play',"_505n",this.togglePlay.bind(this));};r.prototype.addAccessibleButton=function(s,t,u){"use strict";var v=h.create('button',{'class':t,tabindex:0},s);h.insertAfter(this.iframe,v);this.handler.addSubscriptions(j.listen(v,'click',u),j.listen(v,'mouseover',g.hide.bind(null,v)),j.listen(this.iframe,'mouseout',g.show.bind(null,v)),j.listen(v,'focus',function(){if(!this.autoplay&&this.playerState==r.STATE_UNSTARTED){this.post({event:'command',func:'playVideo'});this.post({event:'command',func:'pauseVideo'});}}.bind(this)),j.listen(v,'keydown',function(w){switch(w.keyCode){case k.UP:case k.DOWN:this.post({event:'command',func:'setVolume',args:[this.volume+((w.keyCode==k.UP)?10:-10)]});w.prevent();break;case k.RIGHT:case k.LEFT:this.post({event:'command',func:'seekTo',args:[this.currentTime+((w.keyCode==k.RIGHT)?10:-10)]});w.prevent();break;}}.bind(this)));return v;};r.prototype.destroy=function(){"use strict";this.handler.release();delete r.instances[this.id()];if(!Object.keys(r.instances).length)r.handler.remove();};r.register=function(s,t,u){"use strict";if(!window.postMessage)return;if(!Object.keys(r.instances).length)r.handler=j.listen(window,'message',function(w){try{var x=JSON.parse(w.data);if(r.instances[x.id])r.instances[x.id].update(x);}catch(w){}});var v=new r(i.find(s,'iframe'),t,u);r.instances[v.id()]=v;};p(r,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=r;},null);
__d("EntstreamHomeFeedObjectHide",["AsyncRequest","CSS","DOM","EntstreamFeedObject","EntstreamFeedObjectHide","Event","TrackingNodes","YouTube","csx","cx","ge","tx","$"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){var t={stopVideo:function(u){var v=s(u),w=i.find(v,"^._5jmm"),x=i.scry(w,'iframe');for(var y=0;y<x.length;y++){var z=n.instances[i.getID(x[y])];if(z&&(z.playerState===n.STATE_PLAYING))z.togglePlay();}var aa=i.scry(w,'video');for(var ba=0;ba<aa.length;ba++)if(('paused' in aa[ba])&&!aa[ba].paused)if(typeof aa[ba].pause==='function')aa[ba].pause();},hide:function(u,v,w,x){t.stopVideo(u);var y=j.getRoot(q(u)),z=h.hasClass(y,"_5pat"),aa;if(z&&w=='afrostart'){aa='';}else{var ba=w=='hide'||w=='afrostart'?"This story is now hidden from your News Feed.":"This story has been marked as spam.",ca=w=='hide'||w=='afrostart'?"Unhide":"Undo",da=m.getTrackingInfo(m.types.UNHIDE_LINK),ea=i.create('a',{href:'#','data-ft':da},ca),fa={};if(v)fa.token=v;if(x)fa.hideable_token=x;var ga=new g().setURI('/ajax/entstream/home/story/unhide').setMethod('POST').setData(fa).setRelativeTo(ea);k.registerUnhide(ea,ga);aa=i.create('div',{'class':"_1f86"},[ba,' ',ea]);}k.hide(u,aa);},registerHide:function(u,v,w,x){l.listen(u,'click',function(){t.hide(u.getAttribute('id'),v,w,x);});}};e.exports=t;},null);
__d("EntstreamHomeFeedObjectOptionsMenu",["AdsPrefs","EntstreamHomeFeedObjectHide","EntstreamFeedObjectFollow"],function(a,b,c,d,e,f,g,h,i){function j(k,l,m,n,o){k.subscribe('itemclick',function(p,q){switch(q.item.getValue()){case 'hide':case 'markspam':case 'afrostart':h.hide(l,m,q.item.getValue(),o);break;case 'follow_post':case 'unfollow_post':i.toggleFollow(q.item,l,n);break;case 'ad_useful':case 'ad_neutral':g.toggleFavorite(q.item);break;}}.bind(this));k.subscribe('show',function(){k.forEachItem(function(p){p.onShow();});});}e.exports=j;},null);
__d("EntstreamAttachmentRelatedShare",["Arbiter","AsyncRequest","AttachmentRelatedShareConstants","csx","cx","CSS","DOM","Event","ge"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p={loadRelatedAttachment:function(q,r,s){var t=null;if(typeof q==="string"){t=o(q);}else t=q;if(!t)return;var u=n.listen(t,'click',function(){u.remove();g.inform(i.ARTICLE_CLICK,{attachment:t,global_share_id:r,is_right_click:false,share_id:s});}),v=n.listen(t,'mousedown',function(event){if(event.which==3||event.button==2){v.remove();g.inform(i.ARTICLE_CLICK,{attachment:t,global_share_id:r,is_right_click:true});}});},loadInlineStoryPivotAttachment:function(q,r){var s=o(q);if(!s)return;var t=n.listen(s,'click',function(){t.remove();g.inform(i.PHOTO_CLICK,{attachment:s,storyid:r});});},loadRelatedLSCVideoAttachment:function(q,r){var s=null;if(typeof q==='string'){s=o(q);}else s=q;if(!s)return;var t="^div._4-u2",u=m.scry(s,t),v=n.listen(s,'click',function(){v.remove();g.inform(i.VIDEO_CLICK,{attachment:s,global_share_id:r});});},loadRelatedLSCInlineVideoAttachment:function(q,r){var s=null;if(typeof q==='string'){s=o(q);}else s=q;if(!s)return;n.listen(s,'click',function(){var t="^div._4-u2",u="_1d8v",v=m.scry(s,t),w=v.length===1?v[0]:null,x=w.parentNode,y=x.previousSibling;while(!y){x=x.parentNode;y=x.previousSibling;}if(!l.hasClass(y,u)){var z=m.create('div',{className:u}),aa=m.insertBefore(w.parentNode,z),ba=aa.length>=1?aa[0]:null;}else ba=y;var ca=m.getID(ba);new h().setURI('/ajax/flash/expand_inline.php').setData({share_id:r,target_div:ca,max_width:470,max_height:264,replace_target_div:true,expand_you_tube_video:true}).setMethod('GET').setReadOnly(true).setRelativeTo(s.parentNode).send();g.inform(i.VIDEO_CLICK,{attachment:s,global_share_id:r,continued_chaining:true});});},closeButton:function(q,r){n.listen(q,'click',function(){m.remove(r);});},loadRelatedVideos:function(q,r,s){var t=o(q);if(!t)return;var u=o(r);if(!u)return;var v={global_share_id:s,attachment_div_id:m.getID(t.parentNode),video_div_id:r},w=n.listen(u,'click',function(){w.remove();g.inform(i.VIDEO_CLICK,{attachment:t.parentNode,attachment_div_id:m.getID(t.parentNode),video_div_id:r,global_share_id:s});});},removeOldSuggestions:function(q){var r=o(q);if(!r)return;var s=m.scry(r.parentNode,"._5d73");for(var t=1;t<s.length;t++)m.remove(s[t]);setTimeout(function(){l.show(s[0]);},1000);}};e.exports=p;},null);
__d("FutureHomeSideNav",["Arbiter","AsyncRequest","CSS","DOM","FutureSideNav","FutureSideNavItem","FutureSideNavSection","NavigationMessage","UIPagelet","emptyFunction","tx","csx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){for(var s in k)if(k.hasOwnProperty(s))u[s]=k[s];var t=k===null?null:k.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=k;function u(){"use strict";if(k!==null)k.apply(this,arguments);}u.prototype.init=function(){"use strict";t.init.apply(this,arguments);this.ajaxPipe=true;this.seeAllEndpoint="/ajax/home/generic.php";this.typeSections={favorites:'pinnedNav',profiles:'pinnedNav',company:'companyNav',apps:'appsNav',groups:'groupsNav',pages:'pagesNav',lists:'listsNav',interests:'interestsNav',connect_apps:'connectNav',type_user:'pinnedNav',type_group:'groupsNav',type_company:'companyNav',type_page:'pagesNav',type_friend_list:'listsNav',type_interest_list:'interestsNav',type_non_canvas_app:'appsNav',type_facebook_app:'appsNav',type_canvas_app_game:'appsNav',type_canvas_app_non_game:'appsNav',type_curated_feed:'interestsNav',type_game_tool:'appsNav',type_page_tool:'pagesNav',type_pinnable_page_tool:'pagesNav',type_developer:'developerNav',type_developer_tool:'developerNav'};this._arbiterSubscriptions.push(g.subscribe(n.NAVIGATION_FAVORITE_UPDATE,this.updateFavorite.bind(this)),g.subscribe(n.NAVIGATION_FIRST_RESPONSE,this.navigationFirstResponse.bind(this)));};u.prototype._initSection=function(ba){"use strict";var ca=t._initSection.call(this,ba);for(var da in this.typeSections){var ea=this.typeSections[da];if(ca.id==ea){var fa=j.scry(ca.node,'h4.navHeader')[0];if(fa){var ga='\/bookmarks\/('+da+')(\/)?';ca.seeall=this._initItem({node:fa,id:ca.id,endpoint:this.seeAllEndpoint,key:['bookmarks'],path:[{regex:ga}]});}}}return ca;};u.prototype._constructItem=function(ba,ca){"use strict";return new aa(ba,ca);};u.prototype._constructSection=function(ba){"use strict";return new x(ba);};u.prototype.getSection=function(ba){"use strict";return (this.typeSections[ba]&&this.sections[this.typeSections[ba]]);};u.prototype._getItemForKey=function(ba){"use strict";var ca=t._getItemForKey.call(this,"nf");if(ca&&ca.matchKey(ba)){return ca;}else return t._getItemForKey.call(this,ba);};u.prototype._isCurrentPath=function(ba){"use strict";return ((ba.getDomain()===this.uri.getDomain())&&(ba.getPath()==='/'||ba.getPath()==='/home.php'));};u.prototype._handleMenuClick=function(ba,ca,da,ea){"use strict";if(i.hasClass(da,'favorite')){g.inform(n.NAVIGATION_FAVORITE_UPDATE,{key:ca.numericKey,bookmark_node_id:ca.id,favorite:!ba.equals(this.getSection('favorites')),menu_node:ea});}else t._handleMenuClick.call(this,ba,ca,da,ea);};u.prototype._handleMenuItemClick=function(ba,ca,da){"use strict";if(ba==='favorite'){g.inform(n.NAVIGATION_FAVORITE_UPDATE,{key:da.numericKey,bookmark_node_id:da.id,favorite:!ca.equals(this.getSection('favorites'))});}else t._handleMenuItemClick.call(this,ba,ca,da);};u.prototype._handleLinkClick=function(ba,ca,event){"use strict";var da=this._getItemForNode(ca);if(da&&(da.type=='groups'||da.type=='pages'||da.type=='lists'||da.type=='interests'||da.type=='company'||da.type=='type_group'||da.type=='type_company'||da.type=='type_page'||da.type=='type_friend_list'||da.type=='type_interest_list'||da.type=='type_curated_feed'||da.type=='type_game_tool'||da.type=='type_page_tool'||da.type=='type_facebook_app'||da.type=='type_pinnable_page_tool'))da.setCount(0);t._handleLinkClick.call(this,ba,ca,event);};u.prototype.removeItemByKey=function(ba){"use strict";g.inform(n.NAVIGATION_ITEM_REMOVED,ba);t.removeItemByKey.call(this,ba);};u.prototype.toggleItemByKey=function(ba,ca){"use strict";var da=this.getNodeForKey(ba);if(!ca){g.inform(n.NAVIGATION_ITEM_HIDDEN,ba);da&&i.hide(da);}else da&&i.show(da);var ea=this._getItemForKey(ba);this.getSection(ea.type).refresh();};u.prototype.removeItem=function(ba){"use strict";var ca=this.getSection(ba.type);t.removeItem.call(this,ba);ca.refresh();};u.prototype.updateFavorite=function(ba,ca){"use strict";var da;if(ca.bookmark_node_id){da=this.items[ca.bookmark_node_id];}else da=this._findItem(function(ia){return ia.matchKey(ca.key)&&ia.canFavorite();});var ea=this.getSection("favorites"),fa=p,ga=ca.favorite?ea.addEndpoint:ea.removeEndpoint;if(!da&&ca.favorite){fa=function(){o.loadFromEndpoint('PinnedNavigationPagelet','pagelet_pinned_nav');};}else if(!da){fa=function(){o.loadFromEndpoint('BookmarkNavigationPagelet','pagelet_bookmark_nav');};}else{var ha=this.getSection(da.type);if(ca.favorite){i.show(da.node);this.moveItem(ea,da);da.showFavorite(ca.menu_node);}else if(!ha.equals(ea)){this.moveItem(ha,da,true);da.hideFavorite(ca.menu_node);}else this.removeItem(da);ha.refresh();ea.refresh();ca.key=da.numericKey;g.inform('NavigationMessage.FAVORITES_UPDATED');}new h().setURI(ga).setData({id:ca.key}).setHandler(fa).send();};u.prototype._doPageTransition=function(ba,ca){"use strict";var da=t._doPageTransition.call(this,ba,ca);if(da&&(ba.type=='groups'||ba.type=='lists'||ba.type=='interests'||ba.type=='company'||ba.type=='type_group'||ba.type=='type_page'||ba.type=='type_friend_list'||ba.type=='type_interest_list'||ba.type=='type_curated_feed'||ba.type=='type_game_tool'||ba.type=='type_page_tool'||ba.type=='type_facebook_app'||ba.type=='type_pinnable_page_tool')){ba.setCount(0);ba.hideUnreadDot();}return da;};u.prototype.navigationFirstResponse=function(){"use strict";this.setSelected(this.loading);};for(var v in m)if(m.hasOwnProperty(v))x[v]=m[v];var w=m===null?null:m.prototype;x.prototype=Object.create(w);x.prototype.constructor=x;x.__superConstructor__=m;function x(ba){"use strict";m.call(this,ba);this.editEndpoint='/ajax/bookmark/edit/';this.addEndpoint='/ajax/bookmark/add/';this.removeEndpoint='/ajax/bookmark/delete/';}x.prototype.refresh=function(){"use strict";var ba=j.scry(this.node,'li.sideNavItem'),ca=j.scry(this.node,'h4.navHeader'),da=j.scry(this.node,'div.actionLinks'),ea=ba.some(i.shown);ca.length&&i.conditionShow(ca[0],ea);da.length&&i.conditionShow(da[0],ea);};for(var y in l)if(l.hasOwnProperty(y))aa[y]=l[y];var z=l===null?null:l.prototype;aa.prototype=Object.create(z);aa.prototype.constructor=aa;aa.__superConstructor__=l;function aa(){"use strict";if(l!==null)l.apply(this,arguments);}aa.prototype.canFavorite=function(){"use strict";return !!this._getFavoriteLabel();};aa.prototype.showFavorite=function(ba){"use strict";j.setContent(this._getFavoriteLabel(ba),"Remove from Favorites");};aa.prototype.hideFavorite=function(ba){"use strict";j.setContent(this._getFavoriteLabel(ba),"Add to Favorites");};aa.prototype.hideUnreadDot=function(){"use strict";var ba=j.scry(this.node,'img.unreadDot')[0];ba&&i.hide(ba);};aa.prototype._getFavoriteLabel=function(ba){"use strict";return j.scry(ba,"li.favorite span._54nh")[0];};e.exports=u;},null);
__d("legacy:home-side-nav-future-js",["FutureHomeSideNav"],function(a,b,c,d){a.FutureHomeSideNav=b('FutureHomeSideNav');},3);
__d("LitestandComposerBase",["Animation","Arbiter","ComposerXController","DOM","LitestandMessages","Run","SubscriptionsHandler","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=600;function p(q){this._composerID=q;this._subscriptions=new m();this.init();}n(p.prototype,{init:function(){this._subscriptions.addSubscriptions(h.subscribe('LitestandComposer/publish',function(q,r){if(r.composer_id===this._composerID)this.liveInsertComposerStory(this._composerID,r.markup);}.bind(this)));l.onLeave(this._cleanup.bind(this));},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},liveInsertComposerStory:function(q,r){q&&i.reset(q);if(!r)return;j.prependContent(this.getStreamRoot(),r);new g(r).from('opacity',0).to('opacity',1).duration(o).go();},getStreamRoot:function(){}});e.exports=p;},null);
__d("LitestandComposer",["Arbiter","LitestandComposerBase","LitestandStream"],function(a,b,c,d,e,f,g,h,i){for(var j in h)if(h.hasOwnProperty(j))l[j]=h[j];var k=h===null?null:h.prototype;l.prototype=Object.create(k);l.prototype.constructor=l;l.__superConstructor__=h;function l(){"use strict";if(h!==null)h.apply(this,arguments);}l.prototype.init=function(){"use strict";k.init.call(this);this._subscriptions.addSubscriptions(g.subscribe('LitestandComposer/globalPublish',function(m,n){if(n.top_news_id===i.getSectionID())this.liveInsertComposerStory(null,n.markup);}.bind(this)));};l.prototype.getStreamRoot=function(){"use strict";return i.getStreamRoot();};l.initComposer=function(m){"use strict";new l(m);};e.exports=l;},null);
__d("MercuryLeftNavCountControl",["Arbiter","CSS","DOM","MercuryThreadlistConstants","MessagingTag","copyProperties","MercuryThreadInformer","MercuryUnreadState"],function(a,b,c,d,e,f,g,h,i,j,k,l){var m=b('MercuryThreadInformer').get(),n=b('MercuryUnreadState').get(),o,p,q=function(r,s){o=r;p=s;this.render();this.listenerToken=m.subscribe('unread-updated',this.render.bind(this));this.subscriptions=[g.subscribe('onload/exit',this.cleanup.bind(this))];};l(q.prototype,{render:function(){var r=n.exceedsMaxCount(k.INBOX);if(r){i.setContent(o,j.MAX_UNREAD_COUNT);}else{var s=n.getUnreadCount(k.INBOX);i.setContent(o,s.toString());h.conditionClass(o.parentNode,'hidden_elem',s<=0);}i.setContent(p,r?'+':'');},cleanup:function(){this.subscriptions.forEach(g.unsubscribe);m.unsubscribe(this.listenerToken);}});e.exports=q;},null);
__d("MercuryLeftNav",["DOM","MercuryLeftNavCountControl","MercuryServerRequests"],function(a,b,c,d,e,f,g,h){var i=b('MercuryServerRequests').get();function j(k,l){i.handleUpdate(l);var m=g.scry(k,'span.countValue')[0],n=g.scry(k,'span.maxCountIndicator')[0];new h(m,n);}e.exports=j;},null);
__d("ViewportTracking",["Arbiter","Banzai","BanzaiScuba","CSS","cx","CurrentUser","DOMDimensions","Event","NavigationMessage","Run","Style","SubscriptionsHandler","UserActivity","Vector","clickRefAction","collectDataAttributes","copyProperties","debounce","getElementPosition","throttle","CacheStorage"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){var ba=97,ca='vpv';function da(){"use strict";}da.prototype.init=function(ea){"use strict";this.useBanzai=!!ea.banzai;this.conservative_initial_logging=!!ea.conservative_initial_logging;this.banzaiNoDelay=!!ea.banzai_no_delay;this.banzaiRetry=!!ea.banzai_retry;this.useLocalStorage=!!ea.use_local_storage;this.readStoryIDs={};this.minSizeToBeVisible=200;this.minFractionToBeVisibleForTimetracking=.5;this.minFractionForAdditionalView=0;this.timetrackingThrottlingInterval=100;this.minTimeToReportImmediately=500;this.cachedAllStories=null;this.cachedViewportHeight=m.getViewportDimensions().height;this.isTimetrackingEnabled=0;this.storyEnteredVPTimestamp={};this.alreadyLoggedDurationStories=[];this.userInactiveLock=false;this.userActivityPollerTimeoutID=-1;this._headLoadStoryCount=0;this.getDataFromConfig(ea);this.isLoose=!!ea.is_loose;this.maxScrollPosition=0;this.porportionRatio=.5;this.is_proportion=!!ea.is_proportion;if(this.is_proportion)this.proportionRatio=ea.proportion_ratio;if(ea.tracking_duration_config){this.timetrackingThrottlingInterval=ea.tracking_duration_config.timetracking_throttling_interval;this.userActivityPollingInterval=ea.tracking_duration_config.user_activity_polling_interval;this.timeToBeConsideredInactive=ea.tracking_duration_config.time_to_be_considered_inactive;this.minFractionToBeVisibleForTimetracking=ea.tracking_duration_config.min_fraction_to_be_visible;this.minTimeToReportImmediately=ea.tracking_duration_config.min_time_to_report_immediately;this.minFractionForAdditionalView=ea.tracking_duration_config.min_fraction_for_additional_view;this.localStorageLogMinDurationMs=ea.tracking_duration_config.local_storage_log_min_duration_ms;}var fa,ga=x(this.fireTimer,this.getTimeout(),this);if(this.isLoose){this.minSizeToBeVisible=0;fa=z(function(){this.maxScrollPosition=Math.max(this.maxScrollPosition,t.getScrollPosition().y);ga();}.bind(this));}else fa=ga;if(!ea.scroll_only&&!ea.conservative_initial_logging){this.fireTimer();}else if(ea.conservative_initial_logging){this.initialStories=this.getStoriesInView();this.initialStoriesLogged=false;}this.vpvHeartBeatInterval=ea.vpv_heartbeat_interval;this.passVPVHeartbeatGK=ea.use_vpv_heartbeat;if(this.passVPVHeartbeatGK){this.intervalCount=1;this.fireTimerCount=1;this.storiesInView=this.initialStories?this.initialStories:this.getStoriesInView();this.vpvHeartBeatIntervalSignal=setInterval(function(){this._sendSignal('interval');}.bind(this),this.vpvHeartBeatInterval);}var ha=z(this.updateTimeTrackingData.bind(this,false),this.timetrackingThrottlingInterval);this.subscriptions=new r();this.subscriptions.addSubscriptions(this._getScrollListener(fa),n.listen(window,'resize',function(){this.cachedViewportHeight=m.getViewportDimensions().height;fa();}.bind(this)),g.subscribe(o.NAVIGATION_BEGIN,this.cleanup.bind(this)),g.subscribe('Stream/totalHeadLoadedStories',function(ia,ja){this._headLoadStoryCount=ja;}.bind(this)));if(this.isTimetrackingEnabled){this.updateTimeTrackingData(false);this.subscriptions.addSubscriptions(this._getScrollListener(ha));this._userActivityPoller();}p.onLeave(this.cleanup.bind(this));};da.prototype._getScrollListener=function(ea){"use strict";return n.listen(window,'scroll',ea);};da.prototype.cleanup=function(){"use strict";if(this.subscriptions){this.subscriptions.release();this.subscriptions=null;}if(this.isTimetrackingEnabled){clearTimeout(this.userActivityPollerTimeoutID);this.updateTimeTrackingData(true);}if(this.passVPVHeartbeatGK)clearInterval(this.vpvHeartBeatIntervalSignal);this.initialStories=[];this._headLoadStoryCount=0;};da.prototype.fireTimer=function(){"use strict";if(this.conservative_initial_logging&&!this.initialStoriesLogged){this.initialStories.forEach(this.markStoryRead,this);this.initialStoriesLogged=true;}this.storiesInView=this.getStoriesInView();this.storiesInView.forEach(this.markStoryRead,this);if(this.passVPVHeartbeatGK)this._sendSignal('fireTimer');};da.prototype.heartBeatIsEnabled=function(){"use strict";return false;};da.prototype._sendSignal=function(ea){"use strict";if(!this.heartBeatIsEnabled())return;var fa=-1;if(ea=='interval'){fa=this.intervalCount++;}else if(ea=='fireTimer')fa=this.fireTimerCount++;var ga=-1,ha=-1,ia=-1;if(this.storiesInView.length>0){ga=this.getStoryID(this.storiesInView[0]);ha=this.getQueryID(this.storiesInView[0]);ia=this.getFBFeedLocation(this.storiesInView[0]);}var ja=new i('vpv_heartbeat_js');ja.addInteger('qid',ha);ja.addInteger('uid',l.getID());ja.addInteger('firststoryid',ga);ja.addInteger('time',Math.round(Date.now()/1000));ja.addNormal('type',ea);ja.addInteger('count',fa);ja.addInteger('fbfeed_location',ia);ja.post();};da.prototype._userActivityPoller=function(){"use strict";if(!this.userInactiveLock&&!s.isActive(this.timeToBeConsideredInactive)){this.userInactiveLock=true;this.updateTimeTrackingData(true);s.subscribeOnce(function(){this.updateTimeTrackingData(false);this.userInactiveLock=false;}.bind(this));}this.userActivityPollerTimeoutID=setTimeout(this._userActivityPoller.bind(this),this.userActivityPollingInterval);};da.prototype.getQueryID=function(ea){"use strict";return -1;};da.prototype.getFBFeedLocation=function(ea){"use strict";return -1;};da.prototype.addVisibleStoriesTimestamps=function(ea,fa){"use strict";var ga={};for(var ha=0,ia=ea.length;ha<ia;ha++){var ja=this.getStoryID(ea[ha]);ga[ja]=true;if(ja in this.storyEnteredVPTimestamp)continue;this.storyEnteredVPTimestamp[ja]={ts:fa,story:ea[ha]};}return ga;};da.prototype.removeTimestampsOfStoriesNotInView=function(ea,fa){"use strict";for(var ga in this.storyEnteredVPTimestamp)if(!(ga in ea)){this.recordTimeStoryWasInView(this.storyEnteredVPTimestamp[ga].story,this.storyEnteredVPTimestamp[ga].ts,fa);delete this.storyEnteredVPTimestamp[ga];}};da.prototype.updateTimeTrackingData=function(ea){"use strict";if(!this.storyEnteredVPTimestamp)this.storyEnteredVPTimestamp={};var fa=Date.now(),ga={},ha;if(!ea)ga=this.getAllStoriesInView();ha=this.addVisibleStoriesTimestamps(ga,fa);this.removeTimestampsOfStoriesNotInView(ha,fa);};da.prototype.getStoriesInView=function(){"use strict";var ea=this.getAllStories(),fa=[],ga=false;for(var ha=0;ha<ea.length;ha++){var ia=ea[ha],ja=this.getStoryID(ia);if(this.hasBeenVisible(ja))continue;if(this.isVisible(ia)){if(ia.getAttribute('data-insertion-position')===null)ia.setAttribute('data-insertion-position',ha-this._headLoadStoryCount);fa.push(ia);ga=true;}else if(ga)break;}return fa;};da.prototype.getAllStoriesFromCache=function(){"use strict";if(this.cachedAllStories===null)this.cachedAllStories=this.getAllStories();return this.cachedAllStories;};da.prototype.invalidateAllStoriesCache=function(){"use strict";this.cachedAllStories=null;};da.prototype.getAllStoriesInView=function(){"use strict";var ea=this.getAllStoriesFromCache(),fa=[],ga=false,ha=0,ia=ea.length,ja=1;if(this._indexOfLastVisibleStoryOnPreviousPass>ia/2){ha=ia-1;ia=-1;ja=-ja;}for(var ka=ha;ka!=ia;ka+=ja){var la=ea[ka];if(this.isVisible(la,false,this.minFractionToBeVisibleForTimetracking*m.getElementDimensions(la).height)){if(la.getAttribute('data-insertion-position')===null)la.setAttribute('data-insertion-position',ka-this._headLoadStoryCount);fa.push(la);ga=true;}else if(ga){this._indexOfLastVisibleStoryOnPreviousPass=ka-ja;break;}}for(ka=this.alreadyLoggedDurationStories.length-1;ka>=0;ka--){la=this.alreadyLoggedDurationStories[ka];if(!this.isVisible(la,false,this.minFractionForAdditionalView*m.getElementDimensions(la).height))this.alreadyLoggedDurationStories.splice(ka,1);}return fa;};da.prototype.getTimetrackingDataToLog=function(ea,fa,ga){"use strict";var ha={evt:ba,vpvd_start_timestamp:fa,vpvd_time_delta:ga-fa,story_height:m.getElementDimensions(ea).height,viewport_height:this.cachedViewportHeight};return {ft:ha};};da.prototype.markStoryReadInLocalStorage=function(ea){"use strict";if(this.useLocalStorage){var fa='vpv_local_log.'+parseInt(Date.now()/1000/3600,10)+'h',ga=new aa('localstorage',fa);ga.set(ea,1);}};da.prototype.recordTimeStoryWasInView=function(ea,fa,ga){"use strict";if(this.isTimetrackingEnabled){if(this.alreadyLoggedDurationStories.indexOf(ea)>-1){return;}else this.alreadyLoggedDurationStories.push(ea);var ha=this.getTimetrackingDataToLog(ea,fa,ga),ia=v(ea,['ft']);w(ha.ft,ia.ft);var ja=!!ia.ft.ei&&(ha.ft.vpvd_time_delta>this.minTimeToReportImmediately);delete ha.ei;this.sendDataToLog(ea,ha,ja,false);if(this.useLocalStorage&&ha.ft.vpvd_time_delta>this.localStorageLogMinDurationMs){var ka=this.getStoryID(ea);this.markStoryReadInLocalStorage(ka);}}};da.prototype.hasBeenVisible=function(ea){"use strict";return ea in this.readStoryIDs;};da.prototype.isVisible=function(ea,fa,ga){"use strict";if(typeof fa==="undefined")fa=this.isLoose;if(typeof ga==="undefined")ga=this.minSizeToBeVisible;var ha=t.getScrollPosition().y,ia=m.getViewportDimensions().height,ja=y(ea),ka=m.getElementDimensions(ea),la=ia+this.maxScrollPosition-ha;if(!ja.x&&!ja.y&&!ka.x&&!ka.y)return false;if(fa&&ja.y<la)return true;var ma=Math.max(ja.y,0),na=Math.min(ja.y+ka.height,ia),oa;if(this.is_proportion){oa=ka.height*this.proportionRatio;}else oa=Math.min(ka.height,ga);return (na-ma)>=oa;};da.prototype.sendDataToLog=function(ea,fa,ga,ha){"use strict";if(this.useBanzai){var ia={};if(ga)ia.delay=3000;if(ha)ia.retry=true;h.post('feed_tracking',fa,ia);}else u(ca,ea,null,'FORCE',fa);};da.prototype.markStoryRead=function(ea){"use strict";var fa=this.getStoryID(ea);if(!fa||this.hasBeenVisible(fa))return;this.readStoryIDs[fa]=true;var ga=this.getDataToLog(ea),ha=v(ea,['ft']);w(ga.ft,ha.ft);delete ga.ei;this.markStoryReadInLocalStorage(fa);this.sendDataToLog(ea,ga,this.banzaiNoDelay,this.banzaiRetry);if(j.hasClass(ea,"_50mx")){j.addClass(ea,"_50nb");j.removeClass(ea,"_50mx");}};e.exports=da;},null);
__d("MenuTogglingItem",["DOM","MenuItem"],function(a,b,c,d,e,f,g,h){for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.handleClick=function(){"use strict";this.toggleMenuItem();return j.handleClick.call(this);};k.prototype.toggleMenuItem=function(){"use strict";this._swap('ajaxify','toggleAjaxify');this._swap('value','toggleValue');this._toggleItemText();};k.prototype.setValue=function(l){"use strict";this._data.value=l;};k.prototype._toggleItemText=function(){"use strict";var l=this._anchor;this._swap('markup','toggleMarkup');g.replace(l,this._renderItemContent());};k.prototype._swap=function(l,m){"use strict";var n=this._data[l];this._data[l]=this._data[m];this._data[m]=n;};e.exports=k;},null);